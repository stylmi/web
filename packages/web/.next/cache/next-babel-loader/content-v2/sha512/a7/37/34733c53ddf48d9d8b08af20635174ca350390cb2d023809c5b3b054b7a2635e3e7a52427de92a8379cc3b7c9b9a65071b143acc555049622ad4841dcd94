{"ast":null,"code":"import _objectWithoutProperties from \"C:/Users/olaji/OneDrive/Documents/sellit/template/packages/web/node_modules/next/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport _regeneratorRuntime from \"C:/Users/olaji/OneDrive/Documents/sellit/template/packages/web/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"C:/Users/olaji/OneDrive/Documents/sellit/template/packages/web/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _defineProperty from \"C:/Users/olaji/OneDrive/Documents/sellit/template/packages/web/node_modules/next/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"C:/Users/olaji/OneDrive/Documents/sellit/template/packages/web/node_modules/next/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\olaji\\\\OneDrive\\\\Documents\\\\sellit\\\\template\\\\packages\\\\web\\\\containers\\\\AddPost\\\\LocationInfo\\\\index.js\",\n    _this = this,\n    _s = $RefreshSig$();\n\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useState, useContext, useEffect } from \"react\";\nimport Icon from \"react-icons-kit\";\nimport { archive } from \"react-icons-kit/ionicons/archive\";\nimport { chevronRight } from \"react-icons-kit/ionicons/chevronRight\";\nimport { chevronLeft } from \"react-icons-kit/ionicons/chevronLeft\";\nimport { uploadMultipleImages } from \"../../../helpers/uploadMultipleImage\";\nimport Box from \"../../../../reusecore/src/elements/Box\";\nimport Button from \"../../../../reusecore/src/elements/Button\";\nimport Text from \"../../../../reusecore/src/elements/Text\";\nimport LocationSearchInput from \"../../../components/InputGooglePlace/altered\";\nimport { withGoogleMap, GoogleMap, Marker } from \"react-google-maps\";\nimport { ADD_POST } from \"../../../../core/graphql/Mutations\";\nimport { useMutation } from \"@apollo/react-hooks\";\nimport AuthHelper from \"../../../helpers/authHelper\";\nimport { AddPostContext } from \"../../../contexts/AddPostContext\";\nvar MapView = withGoogleMap(_c = function _c(props) {\n  return __jsx(GoogleMap, {\n    defaultZoom: 13,\n    center: {\n      lat: props.location.latitude,\n      lng: props.location.longitude\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 19,\n      columnNumber: 3\n    }\n  }, __jsx(Marker, {\n    position: {\n      lat: props.location.latitude,\n      lng: props.location.longitude\n    },\n    draggable: true,\n    onDragEnd: props.markerDrag,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 26,\n      columnNumber: 4\n    }\n  }));\n});\n_c2 = MapView;\nvar imagesUrl = [];\n\nvar LocationInfo = function LocationInfo() {\n  _s();\n\n  var _useContext = useContext(AddPostContext),\n      state = _useContext.state,\n      dispatch = _useContext.dispatch;\n\n  var step = state.step,\n      adPost = state.adPost;\n\n  var _useState = useState(false),\n      btnLoading = _useState[0],\n      setBtnLoading = _useState[1];\n\n  var _useMutation = useMutation(ADD_POST),\n      _useMutation2 = _slicedToArray(_useMutation, 2),\n      postMutation = _useMutation2[0],\n      data = _useMutation2[1].data;\n\n  var handleLocation = function handleLocation(latlng, selected) {\n    var locationObject = {\n      lat: false,\n      lng: false,\n      formattedAddress: \"\"\n    };\n\n    var location = _objectSpread(_objectSpread({}, locationObject), {}, {\n      lat: latlng.lat,\n      lng: latlng.lng,\n      formattedAddress: selected\n    });\n\n    dispatch({\n      type: \"UPDATE_ADPOST\",\n      payload: {\n        key: \"location\",\n        value: location\n      }\n    });\n  };\n\n  var handleAddress = function handleAddress() {};\n\n  var handleDraftingPost = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var _data;\n\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return AuthHelper.refreshToken();\n\n            case 2:\n              setBtnLoading(true);\n\n              if (!adPost.localGallery.length) {\n                _context.next = 10;\n                break;\n              }\n\n              _context.next = 6;\n              return uploadMultipleImages(adPost.localGallery);\n\n            case 6:\n              imagesUrl = _context.sent;\n\n              if (imagesUrl && imagesUrl.length > 0) {\n                dispatch({\n                  type: \"UPDATE_FULL_ADPOST\",\n                  payload: {\n                    gallery: adPost.gallery.concat(imagesUrl[0]),\n                    image: !adPost.image.url ? imagesUrl[0][0] : adPost.image,\n                    localImage: {},\n                    localGallery: []\n                  }\n                });\n              }\n\n              _context.next = 21;\n              break;\n\n            case 10:\n              _context.prev = 10;\n              _context.next = 13;\n              return postMutation({\n                variables: {\n                  post: finalData\n                }\n              });\n\n            case 13:\n              _data = _context.sent;\n              setBtnLoading(false);\n\n              if (!adPost.id) {\n                dispatch({\n                  type: \"UPDATE_ADPOST\",\n                  payload: {\n                    key: \"id\",\n                    value: _data.data.addPost.id\n                  }\n                });\n              }\n\n              _context.next = 21;\n              break;\n\n            case 18:\n              _context.prev = 18;\n              _context.t0 = _context[\"catch\"](10);\n              setBtnLoading(false);\n\n            case 21:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[10, 18]]);\n    }));\n\n    return function handleDraftingPost() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  var preImage = adPost.preImage,\n      preGallery = adPost.preGallery,\n      localImage = adPost.localImage,\n      localGallery = adPost.localGallery,\n      location = adPost.location,\n      prossedAdPostData = _objectWithoutProperties(adPost, [\"preImage\", \"preGallery\", \"localImage\", \"localGallery\", \"location\"]);\n\n  var finalData = prossedAdPostData;\n\n  if (location && location.lat) {\n    finalData = _objectSpread(_objectSpread({}, prossedAdPostData), {}, {\n      location: location\n    });\n  }\n\n  useEffect(function () {\n    _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n      var _data2;\n\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              if (!imagesUrl.length) {\n                _context2.next = 12;\n                break;\n              }\n\n              _context2.prev = 1;\n              _context2.next = 4;\n              return postMutation({\n                variables: {\n                  post: finalData\n                }\n              });\n\n            case 4:\n              _data2 = _context2.sent;\n              setBtnLoading(false);\n\n              if (!adPost.id) {\n                dispatch({\n                  type: \"UPDATE_ADPOST\",\n                  payload: {\n                    key: \"id\",\n                    value: _data2.data.addPost.id\n                  }\n                });\n              }\n\n              _context2.next = 12;\n              break;\n\n            case 9:\n              _context2.prev = 9;\n              _context2.t0 = _context2[\"catch\"](1);\n              setBtnLoading(false);\n\n            case 12:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2, null, [[1, 9]]);\n    }))();\n  }, [prossedAdPostData.gallery]);\n  var latlng = {\n    latitude: 22.5104166,\n    longitude: 88.37109750000002\n  };\n\n  if (adPost.location != null) {\n    latlng = {\n      latitude: adPost.location.lat,\n      longitude: adPost.location.lng\n    };\n  }\n\n  var _markerDrag = /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(marker) {\n      var geocoder;\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              geocoder = new google.maps.Geocoder();\n              latlng = {\n                lat: Number(marker.latLng.lat().toFixed(4)),\n                lng: Number(marker.latLng.lng().toFixed(4))\n              };\n              geocoder.geocode({\n                latLng: latlng\n              }, function (results, status) {\n                if (results[0] && results[0].formatted_address) {\n                  var _location = {\n                    lat: latlng.lat,\n                    lng: latlng.lng,\n                    formattedAddress: results[0].formatted_address\n                  };\n                  dispatch({\n                    type: \"UPDATE_ADPOST\",\n                    payload: {\n                      key: \"location\",\n                      value: _location\n                    }\n                  });\n                }\n              });\n\n            case 3:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    }));\n\n    return function markerDrag(_x) {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  var handleChange = function handleChange(address) {\n    dispatch({\n      type: \"UPDATE_ADPOST\",\n      payload: {\n        key: \"location\",\n        value: _objectSpread(_objectSpread({}, adPost.location), {}, {\n          formattedAddress: address\n        })\n      }\n    });\n  };\n\n  return __jsx(React.Fragment, null, __jsx(Text, {\n    content: \"Enter your location\",\n    pb: 20,\n    style: {\n      fontSize: 16,\n      fontWeight: 400,\n      color: \"#595959\"\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 4\n    }\n  }), __jsx(LocationSearchInput, {\n    address: adPost.location && adPost.location.formattedAddress ? adPost.location.formattedAddress : \"\",\n    handleChange: handleChange,\n    handleAddress: handleAddress,\n    handleLocation: handleLocation,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 4\n    }\n  }), __jsx(MapView, {\n    containerElement: __jsx(\"div\", {\n      style: {\n        height: \"195px\",\n        marginTop: \"8px\"\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 199,\n        columnNumber: 23\n      }\n    }),\n    mapElement: __jsx(\"div\", {\n      style: {\n        height: \"100%\"\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 17\n      }\n    }),\n    location: latlng,\n    markerDrag: function markerDrag(marker) {\n      return _markerDrag(marker);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 4\n    }\n  }), __jsx(Box, {\n    flexBox: true,\n    justifyContent: \"space-between\",\n    mt: 40,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 205,\n      columnNumber: 4\n    }\n  }, __jsx(Button, {\n    title: \"Save\",\n    iconPosition: \"left\",\n    icon: __jsx(Icon, {\n      icon: archive,\n      size: 18,\n      color: \"#8C8C8C\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 12\n      }\n    }),\n    onClick: handleDraftingPost,\n    variant: \"textButton\",\n    isLoading: btnLoading,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 206,\n      columnNumber: 5\n    }\n  }), __jsx(Button, {\n    title: \"Previous\",\n    iconPosition: \"left\",\n    onClick: function onClick() {\n      return dispatch({\n        type: \"UPDATE_STEP\",\n        payload: {\n          step: step - 1\n        }\n      });\n    },\n    disabled: btnLoading,\n    icon: __jsx(Icon, {\n      icon: chevronLeft,\n      size: 14,\n      color: \"#8C8C8C\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 224,\n        columnNumber: 12\n      }\n    }),\n    variant: \"textButton\",\n    mr: 30,\n    ml: \"auto\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 214,\n      columnNumber: 5\n    }\n  }), __jsx(Button, {\n    title: \"Next\",\n    iconPosition: \"right\",\n    disabled: adPost.location == null || btnLoading,\n    onClick: function onClick() {\n      return dispatch({\n        type: \"UPDATE_STEP\",\n        payload: {\n          step: step + 1\n        }\n      });\n    },\n    icon: __jsx(Icon, {\n      icon: chevronRight,\n      size: 21,\n      color: \"#ffffff\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 239,\n        columnNumber: 12\n      }\n    }),\n    style: {\n      backgroundColor: adPost.location == null || btnLoading ? \"#e2e2e2\" : \"#30C56D\"\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 229,\n      columnNumber: 5\n    }\n  })));\n};\n\n_s(LocationInfo, \"F1MJHP/w/5UG9NqMZA+1w0vyyxc=\", false, function () {\n  return [useMutation];\n});\n\n_c3 = LocationInfo;\nexport default LocationInfo;\n\nvar _c, _c2, _c3;\n\n$RefreshReg$(_c, \"MapView$withGoogleMap\");\n$RefreshReg$(_c2, \"MapView\");\n$RefreshReg$(_c3, \"LocationInfo\");","map":{"version":3,"sources":["C:/Users/olaji/OneDrive/Documents/sellit/template/packages/web/containers/AddPost/LocationInfo/index.js"],"names":["React","useState","useContext","useEffect","Icon","archive","chevronRight","chevronLeft","uploadMultipleImages","Box","Button","Text","LocationSearchInput","withGoogleMap","GoogleMap","Marker","ADD_POST","useMutation","AuthHelper","AddPostContext","MapView","props","lat","location","latitude","lng","longitude","markerDrag","imagesUrl","LocationInfo","state","dispatch","step","adPost","btnLoading","setBtnLoading","postMutation","data","handleLocation","latlng","selected","locationObject","formattedAddress","type","payload","key","value","handleAddress","handleDraftingPost","refreshToken","localGallery","length","gallery","concat","image","url","localImage","variables","post","finalData","id","addPost","preImage","preGallery","prossedAdPostData","marker","geocoder","google","maps","Geocoder","Number","latLng","toFixed","geocode","results","status","formatted_address","handleChange","address","fontSize","fontWeight","color","height","marginTop","backgroundColor"],"mappings":";;;;;;;;;;;;;;;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,UAA1B,EAAsCC,SAAtC,QAAuD,OAAvD;AACA,OAAOC,IAAP,MAAiB,iBAAjB;AACA,SAASC,OAAT,QAAwB,kCAAxB;AACA,SAASC,YAAT,QAA6B,uCAA7B;AACA,SAASC,WAAT,QAA4B,sCAA5B;AACA,SAASC,oBAAT,QAAqC,sCAArC;AACA,OAAOC,GAAP,MAAgB,wCAAhB;AACA,OAAOC,MAAP,MAAmB,2CAAnB;AACA,OAAOC,IAAP,MAAiB,yCAAjB;AACA,OAAOC,mBAAP,MAAgC,8CAAhC;AACA,SAASC,aAAT,EAAwBC,SAAxB,EAAmCC,MAAnC,QAAiD,mBAAjD;AACA,SAASC,QAAT,QAAyB,oCAAzB;AACA,SAASC,WAAT,QAA4B,qBAA5B;AACA,OAAOC,UAAP,MAAuB,6BAAvB;AACA,SAASC,cAAT,QAA+B,kCAA/B;AAEA,IAAMC,OAAO,GAAGP,aAAa,MAAC,YAACQ,KAAD,EAAW;AACxC,SACC,MAAC,SAAD;AACC,IAAA,WAAW,EAAE,EADd;AAEC,IAAA,MAAM,EAAE;AACPC,MAAAA,GAAG,EAAED,KAAK,CAACE,QAAN,CAAeC,QADb;AAEPC,MAAAA,GAAG,EAAEJ,KAAK,CAACE,QAAN,CAAeG;AAFb,KAFT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAOC,MAAC,MAAD;AACC,IAAA,QAAQ,EAAE;AACTJ,MAAAA,GAAG,EAAED,KAAK,CAACE,QAAN,CAAeC,QADX;AAETC,MAAAA,GAAG,EAAEJ,KAAK,CAACE,QAAN,CAAeG;AAFX,KADX;AAKC,IAAA,SAAS,EAAE,IALZ;AAMC,IAAA,SAAS,EAAEL,KAAK,CAACM,UANlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAPD,CADD;AAkBA,CAnB4B,CAA7B;MAAMP,O;AAqBN,IAAIQ,SAAS,GAAG,EAAhB;;AAEA,IAAMC,YAAY,GAAG,SAAfA,YAAe,GAAM;AAAA;;AAAA,oBACE3B,UAAU,CAACiB,cAAD,CADZ;AAAA,MAClBW,KADkB,eAClBA,KADkB;AAAA,MACXC,QADW,eACXA,QADW;;AAAA,MAElBC,IAFkB,GAEDF,KAFC,CAElBE,IAFkB;AAAA,MAEZC,MAFY,GAEDH,KAFC,CAEZG,MAFY;;AAAA,kBAGUhC,QAAQ,CAAC,KAAD,CAHlB;AAAA,MAGnBiC,UAHmB;AAAA,MAGPC,aAHO;;AAAA,qBAIOlB,WAAW,CAACD,QAAD,CAJlB;AAAA;AAAA,MAInBoB,YAJmB;AAAA,MAIHC,IAJG,oBAIHA,IAJG;;AAM1B,MAAMC,cAAc,GAAG,SAAjBA,cAAiB,CAACC,MAAD,EAASC,QAAT,EAAsB;AAC5C,QAAIC,cAAc,GAAG;AACpBnB,MAAAA,GAAG,EAAE,KADe;AAEpBG,MAAAA,GAAG,EAAE,KAFe;AAGpBiB,MAAAA,gBAAgB,EAAE;AAHE,KAArB;;AAKA,QAAMnB,QAAQ,mCACVkB,cADU;AAEbnB,MAAAA,GAAG,EAAEiB,MAAM,CAACjB,GAFC;AAGbG,MAAAA,GAAG,EAAEc,MAAM,CAACd,GAHC;AAIbiB,MAAAA,gBAAgB,EAAEF;AAJL,MAAd;;AAMAT,IAAAA,QAAQ,CAAC;AACRY,MAAAA,IAAI,EAAE,eADE;AAERC,MAAAA,OAAO,EAAE;AAAEC,QAAAA,GAAG,EAAE,UAAP;AAAmBC,QAAAA,KAAK,EAAEvB;AAA1B;AAFD,KAAD,CAAR;AAIA,GAhBD;;AAkBA,MAAMwB,aAAa,GAAG,SAAhBA,aAAgB,GAAM,CAAE,CAA9B;;AAEA,MAAMC,kBAAkB;AAAA,wEAAG;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBACpB9B,UAAU,CAAC+B,YAAX,EADoB;;AAAA;AAE1Bd,cAAAA,aAAa,CAAC,IAAD,CAAb;;AAF0B,mBAGtBF,MAAM,CAACiB,YAAP,CAAoBC,MAHE;AAAA;AAAA;AAAA;;AAAA;AAAA,qBAIP3C,oBAAoB,CAACyB,MAAM,CAACiB,YAAR,CAJb;;AAAA;AAIzBtB,cAAAA,SAJyB;;AAKzB,kBAAIA,SAAS,IAAIA,SAAS,CAACuB,MAAV,GAAmB,CAApC,EAAuC;AACtCpB,gBAAAA,QAAQ,CAAC;AACRY,kBAAAA,IAAI,EAAE,oBADE;AAERC,kBAAAA,OAAO,EAAE;AACRQ,oBAAAA,OAAO,EAAEnB,MAAM,CAACmB,OAAP,CAAeC,MAAf,CAAsBzB,SAAS,CAAC,CAAD,CAA/B,CADD;AAER0B,oBAAAA,KAAK,EAAE,CAACrB,MAAM,CAACqB,KAAP,CAAaC,GAAd,GAAoB3B,SAAS,CAAC,CAAD,CAAT,CAAa,CAAb,CAApB,GAAsCK,MAAM,CAACqB,KAF5C;AAGRE,oBAAAA,UAAU,EAAE,EAHJ;AAIRN,oBAAAA,YAAY,EAAE;AAJN;AAFD,iBAAD,CAAR;AASA;;AAfwB;AAAA;;AAAA;AAAA;AAAA;AAAA,qBAkBLd,YAAY,CAAC;AAC/BqB,gBAAAA,SAAS,EAAE;AACVC,kBAAAA,IAAI,EAAEC;AADI;AADoB,eAAD,CAlBP;;AAAA;AAkBlBtB,cAAAA,KAlBkB;AAuBxBF,cAAAA,aAAa,CAAC,KAAD,CAAb;;AACA,kBAAI,CAACF,MAAM,CAAC2B,EAAZ,EAAgB;AACf7B,gBAAAA,QAAQ,CAAC;AACRY,kBAAAA,IAAI,EAAE,eADE;AAERC,kBAAAA,OAAO,EAAE;AAAEC,oBAAAA,GAAG,EAAE,IAAP;AAAaC,oBAAAA,KAAK,EAAET,KAAI,CAACA,IAAL,CAAUwB,OAAV,CAAkBD;AAAtC;AAFD,iBAAD,CAAR;AAIA;;AA7BuB;AAAA;;AAAA;AAAA;AAAA;AA+BxBzB,cAAAA,aAAa,CAAC,KAAD,CAAb;;AA/BwB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAH;;AAAA,oBAAlBa,kBAAkB;AAAA;AAAA;AAAA,KAAxB;;AA1B0B,MA+DzBc,QA/DyB,GAqEtB7B,MArEsB,CA+DzB6B,QA/DyB;AAAA,MAgEzBC,UAhEyB,GAqEtB9B,MArEsB,CAgEzB8B,UAhEyB;AAAA,MAiEzBP,UAjEyB,GAqEtBvB,MArEsB,CAiEzBuB,UAjEyB;AAAA,MAkEzBN,YAlEyB,GAqEtBjB,MArEsB,CAkEzBiB,YAlEyB;AAAA,MAmEzB3B,QAnEyB,GAqEtBU,MArEsB,CAmEzBV,QAnEyB;AAAA,MAoEtByC,iBApEsB,4BAqEtB/B,MArEsB;;AAsE1B,MAAI0B,SAAS,GAAGK,iBAAhB;;AACA,MAAIzC,QAAQ,IAAIA,QAAQ,CAACD,GAAzB,EAA8B;AAC7BqC,IAAAA,SAAS,mCACLK,iBADK;AAERzC,MAAAA,QAAQ,EAARA;AAFQ,MAAT;AAIA;;AAEDpB,EAAAA,SAAS,CAAC,YAAM;AACf,6DAAC;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA,mBACIyB,SAAS,CAACuB,MADd;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA,qBAGqBf,YAAY,CAAC;AAC/BqB,gBAAAA,SAAS,EAAE;AACVC,kBAAAA,IAAI,EAAEC;AADI;AADoB,eAAD,CAHjC;;AAAA;AAGQtB,cAAAA,MAHR;AAQEF,cAAAA,aAAa,CAAC,KAAD,CAAb;;AACA,kBAAI,CAACF,MAAM,CAAC2B,EAAZ,EAAgB;AACf7B,gBAAAA,QAAQ,CAAC;AACRY,kBAAAA,IAAI,EAAE,eADE;AAERC,kBAAAA,OAAO,EAAE;AAAEC,oBAAAA,GAAG,EAAE,IAAP;AAAaC,oBAAAA,KAAK,EAAET,MAAI,CAACA,IAAL,CAAUwB,OAAV,CAAkBD;AAAtC;AAFD,iBAAD,CAAR;AAIA;;AAdH;AAAA;;AAAA;AAAA;AAAA;AAgBEzB,cAAAA,aAAa,CAAC,KAAD,CAAb;;AAhBF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAD;AAoBA,GArBQ,EAqBN,CAAC6B,iBAAiB,CAACZ,OAAnB,CArBM,CAAT;AAuBA,MAAIb,MAAM,GAAG;AACZf,IAAAA,QAAQ,EAAE,UADE;AAEZE,IAAAA,SAAS,EAAE;AAFC,GAAb;;AAKA,MAAIO,MAAM,CAACV,QAAP,IAAmB,IAAvB,EAA6B;AAC5BgB,IAAAA,MAAM,GAAG;AACRf,MAAAA,QAAQ,EAAES,MAAM,CAACV,QAAP,CAAgBD,GADlB;AAERI,MAAAA,SAAS,EAAEO,MAAM,CAACV,QAAP,CAAgBE;AAFnB,KAAT;AAIA;;AACD,MAAME,WAAU;AAAA,yEAAG,kBAAOsC,MAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AACdC,cAAAA,QADc,GACH,IAAIC,MAAM,CAACC,IAAP,CAAYC,QAAhB,EADG;AAElB9B,cAAAA,MAAM,GAAG;AACRjB,gBAAAA,GAAG,EAAEgD,MAAM,CAACL,MAAM,CAACM,MAAP,CAAcjD,GAAd,GAAoBkD,OAApB,CAA4B,CAA5B,CAAD,CADH;AAER/C,gBAAAA,GAAG,EAAE6C,MAAM,CAACL,MAAM,CAACM,MAAP,CAAc9C,GAAd,GAAoB+C,OAApB,CAA4B,CAA5B,CAAD;AAFH,eAAT;AAIAN,cAAAA,QAAQ,CAACO,OAAT,CAAiB;AAAEF,gBAAAA,MAAM,EAAEhC;AAAV,eAAjB,EAAqC,UAASmC,OAAT,EAAkBC,MAAlB,EAA0B;AAC9D,oBAAID,OAAO,CAAC,CAAD,CAAP,IAAcA,OAAO,CAAC,CAAD,CAAP,CAAWE,iBAA7B,EAAgD;AAC/C,sBAAMrD,SAAQ,GAAG;AAChBD,oBAAAA,GAAG,EAAEiB,MAAM,CAACjB,GADI;AAEhBG,oBAAAA,GAAG,EAAEc,MAAM,CAACd,GAFI;AAGhBiB,oBAAAA,gBAAgB,EAAEgC,OAAO,CAAC,CAAD,CAAP,CAAWE;AAHb,mBAAjB;AAKA7C,kBAAAA,QAAQ,CAAC;AACRY,oBAAAA,IAAI,EAAE,eADE;AAERC,oBAAAA,OAAO,EAAE;AAAEC,sBAAAA,GAAG,EAAE,UAAP;AAAmBC,sBAAAA,KAAK,EAAEvB;AAA1B;AAFD,mBAAD,CAAR;AAIA;AACD,eAZD;;AANkB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAH;;AAAA,oBAAVI,UAAU;AAAA;AAAA;AAAA,KAAhB;;AAoBA,MAAMkD,YAAY,GAAG,SAAfA,YAAe,CAACC,OAAD,EAAa;AACjC/C,IAAAA,QAAQ,CAAC;AACRY,MAAAA,IAAI,EAAE,eADE;AAERC,MAAAA,OAAO,EAAE;AACRC,QAAAA,GAAG,EAAE,UADG;AAERC,QAAAA,KAAK,kCAAOb,MAAM,CAACV,QAAd;AAAwBmB,UAAAA,gBAAgB,EAAEoC;AAA1C;AAFG;AAFD,KAAD,CAAR;AAOA,GARD;;AASA,SACC,4BACC,MAAC,IAAD;AACC,IAAA,OAAO,EAAC,qBADT;AAEC,IAAA,EAAE,EAAE,EAFL;AAGC,IAAA,KAAK,EAAE;AAAEC,MAAAA,QAAQ,EAAE,EAAZ;AAAgBC,MAAAA,UAAU,EAAE,GAA5B;AAAiCC,MAAAA,KAAK,EAAE;AAAxC,KAHR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADD,EAMC,MAAC,mBAAD;AACC,IAAA,OAAO,EACNhD,MAAM,CAACV,QAAP,IAAmBU,MAAM,CAACV,QAAP,CAAgBmB,gBAAnC,GACGT,MAAM,CAACV,QAAP,CAAgBmB,gBADnB,GAEG,EAJL;AAMC,IAAA,YAAY,EAAEmC,YANf;AAOC,IAAA,aAAa,EAAE9B,aAPhB;AAQC,IAAA,cAAc,EAAET,cARjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAND,EAgBC,MAAC,OAAD;AACC,IAAA,gBAAgB,EAAE;AAAK,MAAA,KAAK,EAAE;AAAE4C,QAAAA,MAAM,SAAR;AAAmBC,QAAAA,SAAS,EAAE;AAA9B,OAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADnB;AAEC,IAAA,UAAU,EAAE;AAAK,MAAA,KAAK,EAAE;AAAED,QAAAA,MAAM;AAAR,OAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFb;AAGC,IAAA,QAAQ,EAAE3C,MAHX;AAIC,IAAA,UAAU,EAAE,oBAAC0B,MAAD;AAAA,aAAYtC,WAAU,CAACsC,MAAD,CAAtB;AAAA,KAJb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAhBD,EAuBC,MAAC,GAAD;AAAK,IAAA,OAAO,MAAZ;AAAa,IAAA,cAAc,EAAC,eAA5B;AAA4C,IAAA,EAAE,EAAE,EAAhD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACC,MAAC,MAAD;AACC,IAAA,KAAK,EAAC,MADP;AAEC,IAAA,YAAY,EAAC,MAFd;AAGC,IAAA,IAAI,EAAE,MAAC,IAAD;AAAM,MAAA,IAAI,EAAE5D,OAAZ;AAAqB,MAAA,IAAI,EAAE,EAA3B;AAA+B,MAAA,KAAK,EAAC,SAArC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAHP;AAIC,IAAA,OAAO,EAAE2C,kBAJV;AAKC,IAAA,OAAO,EAAC,YALT;AAMC,IAAA,SAAS,EAAEd,UANZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADD,EASC,MAAC,MAAD;AACC,IAAA,KAAK,EAAC,UADP;AAEC,IAAA,YAAY,EAAC,MAFd;AAGC,IAAA,OAAO,EAAE;AAAA,aACRH,QAAQ,CAAC;AACRY,QAAAA,IAAI,EAAE,aADE;AAERC,QAAAA,OAAO,EAAE;AAAEZ,UAAAA,IAAI,EAAEA,IAAI,GAAG;AAAf;AAFD,OAAD,CADA;AAAA,KAHV;AASC,IAAA,QAAQ,EAAEE,UATX;AAUC,IAAA,IAAI,EAAE,MAAC,IAAD;AAAM,MAAA,IAAI,EAAE3B,WAAZ;AAAyB,MAAA,IAAI,EAAE,EAA/B;AAAmC,MAAA,KAAK,EAAC,SAAzC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAVP;AAWC,IAAA,OAAO,EAAC,YAXT;AAYC,IAAA,EAAE,EAAE,EAZL;AAaC,IAAA,EAAE,EAAC,MAbJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IATD,EAwBC,MAAC,MAAD;AACC,IAAA,KAAK,EAAC,MADP;AAEC,IAAA,YAAY,EAAC,OAFd;AAGC,IAAA,QAAQ,EAAE0B,MAAM,CAACV,QAAP,IAAmB,IAAnB,IAA2BW,UAHtC;AAIC,IAAA,OAAO,EAAE;AAAA,aACRH,QAAQ,CAAC;AACRY,QAAAA,IAAI,EAAE,aADE;AAERC,QAAAA,OAAO,EAAE;AAAEZ,UAAAA,IAAI,EAAEA,IAAI,GAAG;AAAf;AAFD,OAAD,CADA;AAAA,KAJV;AAUC,IAAA,IAAI,EAAE,MAAC,IAAD;AAAM,MAAA,IAAI,EAAE1B,YAAZ;AAA0B,MAAA,IAAI,EAAE,EAAhC;AAAoC,MAAA,KAAK,EAAC,SAA1C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAVP;AAWC,IAAA,KAAK,EAAE;AACN8E,MAAAA,eAAe,EACdnD,MAAM,CAACV,QAAP,IAAmB,IAAnB,IAA2BW,UAA3B,GAAwC,SAAxC,GAAoD;AAF/C,KAXR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAxBD,CAvBD,CADD;AAmEA,CAhND;;GAAML,Y;UAI4BZ,W;;;MAJ5BY,Y;AAkNN,eAAeA,YAAf","sourcesContent":["import React, { useState, useContext, useEffect } from \"react\";\r\nimport Icon from \"react-icons-kit\";\r\nimport { archive } from \"react-icons-kit/ionicons/archive\";\r\nimport { chevronRight } from \"react-icons-kit/ionicons/chevronRight\";\r\nimport { chevronLeft } from \"react-icons-kit/ionicons/chevronLeft\";\r\nimport { uploadMultipleImages } from \"../../../helpers/uploadMultipleImage\";\r\nimport Box from \"../../../../reusecore/src/elements/Box\";\r\nimport Button from \"../../../../reusecore/src/elements/Button\";\r\nimport Text from \"../../../../reusecore/src/elements/Text\";\r\nimport LocationSearchInput from \"../../../components/InputGooglePlace/altered\";\r\nimport { withGoogleMap, GoogleMap, Marker } from \"react-google-maps\";\r\nimport { ADD_POST } from \"../../../../core/graphql/Mutations\";\r\nimport { useMutation } from \"@apollo/react-hooks\";\r\nimport AuthHelper from \"../../../helpers/authHelper\";\r\nimport { AddPostContext } from \"../../../contexts/AddPostContext\";\r\n\r\nconst MapView = withGoogleMap((props) => {\r\n\treturn (\r\n\t\t<GoogleMap\r\n\t\t\tdefaultZoom={13}\r\n\t\t\tcenter={{\r\n\t\t\t\tlat: props.location.latitude,\r\n\t\t\t\tlng: props.location.longitude,\r\n\t\t\t}}\r\n\t\t>\r\n\t\t\t<Marker\r\n\t\t\t\tposition={{\r\n\t\t\t\t\tlat: props.location.latitude,\r\n\t\t\t\t\tlng: props.location.longitude,\r\n\t\t\t\t}}\r\n\t\t\t\tdraggable={true}\r\n\t\t\t\tonDragEnd={props.markerDrag}\r\n\t\t\t/>\r\n\t\t</GoogleMap>\r\n\t);\r\n});\r\n\r\nlet imagesUrl = [];\r\n\r\nconst LocationInfo = () => {\r\n\tconst { state, dispatch } = useContext(AddPostContext);\r\n\tconst { step, adPost } = state;\r\n\tconst [btnLoading, setBtnLoading] = useState(false);\r\n\tconst [postMutation, { data }] = useMutation(ADD_POST);\r\n\r\n\tconst handleLocation = (latlng, selected) => {\r\n\t\tlet locationObject = {\r\n\t\t\tlat: false,\r\n\t\t\tlng: false,\r\n\t\t\tformattedAddress: \"\",\r\n\t\t};\r\n\t\tconst location = {\r\n\t\t\t...locationObject,\r\n\t\t\tlat: latlng.lat,\r\n\t\t\tlng: latlng.lng,\r\n\t\t\tformattedAddress: selected,\r\n\t\t};\r\n\t\tdispatch({\r\n\t\t\ttype: \"UPDATE_ADPOST\",\r\n\t\t\tpayload: { key: \"location\", value: location },\r\n\t\t});\r\n\t};\r\n\r\n\tconst handleAddress = () => {};\r\n\r\n\tconst handleDraftingPost = async () => {\r\n\t\tawait AuthHelper.refreshToken();\r\n\t\tsetBtnLoading(true);\r\n\t\tif (adPost.localGallery.length) {\r\n\t\t\timagesUrl = await uploadMultipleImages(adPost.localGallery);\r\n\t\t\tif (imagesUrl && imagesUrl.length > 0) {\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: \"UPDATE_FULL_ADPOST\",\r\n\t\t\t\t\tpayload: {\r\n\t\t\t\t\t\tgallery: adPost.gallery.concat(imagesUrl[0]),\r\n\t\t\t\t\t\timage: !adPost.image.url ? imagesUrl[0][0] : adPost.image,\r\n\t\t\t\t\t\tlocalImage: {},\r\n\t\t\t\t\t\tlocalGallery: [],\r\n\t\t\t\t\t},\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\ttry {\r\n\t\t\t\tconst data = await postMutation({\r\n\t\t\t\t\tvariables: {\r\n\t\t\t\t\t\tpost: finalData,\r\n\t\t\t\t\t},\r\n\t\t\t\t});\r\n\t\t\t\tsetBtnLoading(false);\r\n\t\t\t\tif (!adPost.id) {\r\n\t\t\t\t\tdispatch({\r\n\t\t\t\t\t\ttype: \"UPDATE_ADPOST\",\r\n\t\t\t\t\t\tpayload: { key: \"id\", value: data.data.addPost.id },\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t} catch (error) {\r\n\t\t\t\tsetBtnLoading(false);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tconst {\r\n\t\tpreImage,\r\n\t\tpreGallery,\r\n\t\tlocalImage,\r\n\t\tlocalGallery,\r\n\t\tlocation,\r\n\t\t...prossedAdPostData\r\n\t} = adPost;\r\n\tlet finalData = prossedAdPostData;\r\n\tif (location && location.lat) {\r\n\t\tfinalData = {\r\n\t\t\t...prossedAdPostData,\r\n\t\t\tlocation,\r\n\t\t};\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\t(async function() {\r\n\t\t\tif (imagesUrl.length) {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tconst data = await postMutation({\r\n\t\t\t\t\t\tvariables: {\r\n\t\t\t\t\t\t\tpost: finalData,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t});\r\n\t\t\t\t\tsetBtnLoading(false);\r\n\t\t\t\t\tif (!adPost.id) {\r\n\t\t\t\t\t\tdispatch({\r\n\t\t\t\t\t\t\ttype: \"UPDATE_ADPOST\",\r\n\t\t\t\t\t\t\tpayload: { key: \"id\", value: data.data.addPost.id },\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t} catch (error) {\r\n\t\t\t\t\tsetBtnLoading(false);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t})();\r\n\t}, [prossedAdPostData.gallery]);\r\n\r\n\tlet latlng = {\r\n\t\tlatitude: 22.5104166,\r\n\t\tlongitude: 88.37109750000002,\r\n\t};\r\n\r\n\tif (adPost.location != null) {\r\n\t\tlatlng = {\r\n\t\t\tlatitude: adPost.location.lat,\r\n\t\t\tlongitude: adPost.location.lng,\r\n\t\t};\r\n\t}\r\n\tconst markerDrag = async (marker) => {\r\n\t\tvar geocoder = new google.maps.Geocoder();\r\n\t\tlatlng = {\r\n\t\t\tlat: Number(marker.latLng.lat().toFixed(4)),\r\n\t\t\tlng: Number(marker.latLng.lng().toFixed(4)),\r\n\t\t};\r\n\t\tgeocoder.geocode({ latLng: latlng }, function(results, status) {\r\n\t\t\tif (results[0] && results[0].formatted_address) {\r\n\t\t\t\tconst location = {\r\n\t\t\t\t\tlat: latlng.lat,\r\n\t\t\t\t\tlng: latlng.lng,\r\n\t\t\t\t\tformattedAddress: results[0].formatted_address,\r\n\t\t\t\t};\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: \"UPDATE_ADPOST\",\r\n\t\t\t\t\tpayload: { key: \"location\", value: location },\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\tconst handleChange = (address) => {\r\n\t\tdispatch({\r\n\t\t\ttype: \"UPDATE_ADPOST\",\r\n\t\t\tpayload: {\r\n\t\t\t\tkey: \"location\",\r\n\t\t\t\tvalue: { ...adPost.location, formattedAddress: address },\r\n\t\t\t},\r\n\t\t});\r\n\t};\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<Text\r\n\t\t\t\tcontent=\"Enter your location\"\r\n\t\t\t\tpb={20}\r\n\t\t\t\tstyle={{ fontSize: 16, fontWeight: 400, color: \"#595959\" }}\r\n\t\t\t/>\r\n\t\t\t<LocationSearchInput\r\n\t\t\t\taddress={\r\n\t\t\t\t\tadPost.location && adPost.location.formattedAddress\r\n\t\t\t\t\t\t? adPost.location.formattedAddress\r\n\t\t\t\t\t\t: \"\"\r\n\t\t\t\t}\r\n\t\t\t\thandleChange={handleChange}\r\n\t\t\t\thandleAddress={handleAddress}\r\n\t\t\t\thandleLocation={handleLocation}\r\n\t\t\t/>\r\n\t\t\t<MapView\r\n\t\t\t\tcontainerElement={<div style={{ height: `195px`, marginTop: \"8px\" }} />}\r\n\t\t\t\tmapElement={<div style={{ height: `100%` }} />}\r\n\t\t\t\tlocation={latlng}\r\n\t\t\t\tmarkerDrag={(marker) => markerDrag(marker)}\r\n\t\t\t/>\r\n\r\n\t\t\t<Box flexBox justifyContent=\"space-between\" mt={40}>\r\n\t\t\t\t<Button\r\n\t\t\t\t\ttitle=\"Save\"\r\n\t\t\t\t\ticonPosition=\"left\"\r\n\t\t\t\t\ticon={<Icon icon={archive} size={18} color=\"#8C8C8C\" />}\r\n\t\t\t\t\tonClick={handleDraftingPost}\r\n\t\t\t\t\tvariant=\"textButton\"\r\n\t\t\t\t\tisLoading={btnLoading}\r\n\t\t\t\t/>\r\n\t\t\t\t<Button\r\n\t\t\t\t\ttitle=\"Previous\"\r\n\t\t\t\t\ticonPosition=\"left\"\r\n\t\t\t\t\tonClick={() =>\r\n\t\t\t\t\t\tdispatch({\r\n\t\t\t\t\t\t\ttype: \"UPDATE_STEP\",\r\n\t\t\t\t\t\t\tpayload: { step: step - 1 },\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t\tdisabled={btnLoading}\r\n\t\t\t\t\ticon={<Icon icon={chevronLeft} size={14} color=\"#8C8C8C\" />}\r\n\t\t\t\t\tvariant=\"textButton\"\r\n\t\t\t\t\tmr={30}\r\n\t\t\t\t\tml=\"auto\"\r\n\t\t\t\t/>\r\n\t\t\t\t<Button\r\n\t\t\t\t\ttitle=\"Next\"\r\n\t\t\t\t\ticonPosition=\"right\"\r\n\t\t\t\t\tdisabled={adPost.location == null || btnLoading}\r\n\t\t\t\t\tonClick={() =>\r\n\t\t\t\t\t\tdispatch({\r\n\t\t\t\t\t\t\ttype: \"UPDATE_STEP\",\r\n\t\t\t\t\t\t\tpayload: { step: step + 1 },\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t\ticon={<Icon icon={chevronRight} size={21} color=\"#ffffff\" />}\r\n\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\tbackgroundColor:\r\n\t\t\t\t\t\t\tadPost.location == null || btnLoading ? \"#e2e2e2\" : \"#30C56D\",\r\n\t\t\t\t\t}}\r\n\t\t\t\t/>\r\n\t\t\t</Box>\r\n\t\t</>\r\n\t);\r\n};\r\n\r\nexport default LocationInfo;\r\n"]},"metadata":{},"sourceType":"module"}