{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\olaji\\\\OneDrive\\\\Documents\\\\sellit\\\\template\\\\packages\\\\web\\\\containers\\\\AddPost\\\\TitleAndPriceInfo\\\\index.js\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React, { useContext, useEffect, useState } from \"react\";\nimport getSlug from \"speakingurl\";\nimport { uploadMultipleImages } from \"../../../helpers/uploadMultipleImage\";\nimport Icon from \"react-icons-kit\";\nimport { archive } from \"react-icons-kit/ionicons/archive\";\nimport { chevronRight } from \"react-icons-kit/ionicons/chevronRight\";\nimport Switch from \"../../../../reusecore/src/elements/Switch\";\nimport Button from \"../../../../reusecore/src/elements/Button\";\nimport Text from \"../../../../reusecore/src/elements/Text\";\nimport Box from \"../../../../reusecore/src/elements/Box\";\nimport Input from \"../../../components/Input\";\nimport AuthHelper from \"../../../helpers/authHelper\";\nimport { ADD_POST } from \"../../../../core/graphql/Mutations\";\nimport { useMutation } from \"@apollo/react-hooks\";\nimport { AddPostContext } from \"../../../contexts/AddPostContext\";\nlet imagesUrl = [];\n\nconst TitleAndPriceInfo = () => {\n  const {\n    state,\n    dispatch\n  } = useContext(AddPostContext);\n  const {\n    step,\n    adPost\n  } = state;\n  const {\n    0: errors,\n    1: setError\n  } = useState(\"\");\n  const {\n    0: btnLoading,\n    1: setBtnLoading\n  } = useState(false);\n  const [postMutation] = useMutation(ADD_POST);\n\n  const handleDraftingPost = async () => {\n    await AuthHelper.refreshToken();\n    setBtnLoading(true);\n\n    if (adPost.localGallery.length) {\n      imagesUrl = await uploadMultipleImages(adPost.localGallery);\n\n      if (imagesUrl && imagesUrl.length > 0) {\n        dispatch({\n          type: \"UPDATE_FULL_ADPOST\",\n          payload: {\n            gallery: adPost.gallery.concat(imagesUrl[0]),\n            image: !adPost.image.url ? imagesUrl[0][0] : adPost.image,\n            localImage: {},\n            localGallery: []\n          }\n        });\n      }\n    } else {\n      try {\n        const data = await postMutation({\n          variables: {\n            post: finalData\n          }\n        });\n        setBtnLoading(false);\n\n        if (!adPost.id) {\n          dispatch({\n            type: \"UPDATE_ADPOST\",\n            payload: {\n              key: \"id\",\n              value: data.data.addPost.id\n            }\n          });\n        }\n      } catch (error) {\n        setBtnLoading(false);\n      }\n    }\n  };\n\n  const {\n    preImage,\n    preGallery,\n    localImage,\n    localGallery,\n    location\n  } = adPost,\n        prossedAdPostData = _objectWithoutProperties(adPost, [\"preImage\", \"preGallery\", \"localImage\", \"localGallery\", \"location\"]);\n\n  let finalData = prossedAdPostData;\n\n  if (location && location.lat) {\n    finalData = _objectSpread(_objectSpread({}, prossedAdPostData), {}, {\n      location\n    });\n  }\n\n  useEffect(() => {\n    (async function () {\n      if (imagesUrl.length) {\n        try {\n          const data = await postMutation({\n            variables: {\n              post: finalData\n            }\n          });\n          console.log(data, \"data\");\n          setBtnLoading(false);\n\n          if (!adPost.id) {\n            dispatch({\n              type: \"UPDATE_ADPOST\",\n              payload: {\n                key: \"id\",\n                value: data.data.addPost.id\n              }\n            });\n          }\n        } catch (error) {\n          setBtnLoading(false);\n        }\n      }\n    })();\n  }, [prossedAdPostData.gallery]);\n  return __jsx(React.Fragment, null, __jsx(Text, {\n    content: \"Enter the below details\",\n    pb: 20,\n    style: {\n      fontSize: 16,\n      fontWeight: 400,\n      color: \"#595959\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 4\n    }\n  }), __jsx(Input, {\n    elementType: \"input\",\n    value: adPost.title,\n    elementConfig: {\n      type: \"text\",\n      required: \"required\"\n    },\n    label: \"Title\",\n    changed: title => {\n      dispatch({\n        type: \"UPDATE_ADPOST\",\n        payload: {\n          key: \"title\",\n          value: title.target.value\n        }\n      }); // if (adPost.slug === '') {\n\n      dispatch({\n        type: \"UPDATE_ADPOST\",\n        payload: {\n          key: \"slug\",\n          value: getSlug(title.target.value)\n        }\n      }); // }\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 4\n    }\n  }), __jsx(Input, {\n    elementType: \"input\",\n    elementConfig: {\n      type: \"number\",\n      required: \"required\"\n    },\n    label: \"Price\",\n    value: adPost.price,\n    changed: price => dispatch({\n      type: \"UPDATE_ADPOST\",\n      payload: {\n        key: \"price\",\n        value: parseFloat(price.target.value)\n      }\n    }),\n    style: {\n      marginBottom: 40\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 4\n    }\n  }), __jsx(Box, {\n    flexBox: true,\n    justifyContent: \"space-between\",\n    mb: 30,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 4\n    }\n  }, __jsx(Text, {\n    content: \"Negotiable?\",\n    color: \"#595959\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 5\n    }\n  }), __jsx(Switch, {\n    switchSize: \"50px\",\n    switchColor: \"#30C56D\",\n    barColor: \"#30C56D\",\n    onChange: val => dispatch({\n      type: \"UPDATE_ADPOST\",\n      payload: {\n        key: \"isNegotiable\",\n        value: !adPost.isNegotiable\n      }\n    }),\n    isChecked: adPost.isNegotiable,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 5\n    }\n  })), __jsx(Box, {\n    flexBox: true,\n    justifyContent: \"space-between\",\n    mb: 30,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 4\n    }\n  }, __jsx(Text, {\n    content: \"New Condition?\",\n    color: \"#595959\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 5\n    }\n  }), __jsx(Switch, {\n    switchSize: \"50px\",\n    switchColor: \"#30C56D\",\n    barColor: \"#30C56D\",\n    onChange: val => {\n      dispatch({\n        type: \"UPDATE_ADPOST\",\n        payload: {\n          key: \"condition\",\n          value: !adPost.condition\n        }\n      });\n    },\n    isChecked: adPost.condition,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 5\n    }\n  })), __jsx(Box, {\n    flexBox: true,\n    justifyContent: \"space-between\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 4\n    }\n  }, __jsx(Button, {\n    title: \"Save\",\n    iconPosition: \"left\",\n    icon: __jsx(Icon, {\n      icon: archive,\n      size: 18,\n      color: \"#8C8C8C\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 12\n      }\n    }),\n    onClick: handleDraftingPost,\n    variant: \"textButton\",\n    isLoading: btnLoading,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 5\n    }\n  }), __jsx(Button, {\n    title: \"Next\",\n    iconPosition: \"right\",\n    disabled: adPost.title.length === 0 || adPost.price.length === 0 || btnLoading,\n    onClick: () => dispatch({\n      type: \"UPDATE_STEP\",\n      payload: {\n        step: step + 1\n      }\n    }),\n    icon: __jsx(Icon, {\n      icon: chevronRight,\n      size: 21,\n      color: \"#ffffff\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 12\n      }\n    }),\n    style: {\n      backgroundColor: adPost.title.length === 0 || adPost.price.length === 0 || btnLoading ? \"#e2e2e2\" : \"#30C56D\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 5\n    }\n  })));\n};\n\nexport default TitleAndPriceInfo;","map":{"version":3,"sources":["C:/Users/olaji/OneDrive/Documents/sellit/template/packages/web/containers/AddPost/TitleAndPriceInfo/index.js"],"names":["React","useContext","useEffect","useState","getSlug","uploadMultipleImages","Icon","archive","chevronRight","Switch","Button","Text","Box","Input","AuthHelper","ADD_POST","useMutation","AddPostContext","imagesUrl","TitleAndPriceInfo","state","dispatch","step","adPost","errors","setError","btnLoading","setBtnLoading","postMutation","handleDraftingPost","refreshToken","localGallery","length","type","payload","gallery","concat","image","url","localImage","data","variables","post","finalData","id","key","value","addPost","error","preImage","preGallery","location","prossedAdPostData","lat","console","log","fontSize","fontWeight","color","title","required","target","price","parseFloat","marginBottom","val","isNegotiable","condition","backgroundColor"],"mappings":"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","sourcesContent":["import React, { useContext, useEffect, useState } from \"react\";\r\nimport getSlug from \"speakingurl\";\r\nimport { uploadMultipleImages } from \"../../../helpers/uploadMultipleImage\";\r\nimport Icon from \"react-icons-kit\";\r\nimport { archive } from \"react-icons-kit/ionicons/archive\";\r\nimport { chevronRight } from \"react-icons-kit/ionicons/chevronRight\";\r\nimport Switch from \"../../../../reusecore/src/elements/Switch\";\r\nimport Button from \"../../../../reusecore/src/elements/Button\";\r\nimport Text from \"../../../../reusecore/src/elements/Text\";\r\nimport Box from \"../../../../reusecore/src/elements/Box\";\r\nimport Input from \"../../../components/Input\";\r\nimport AuthHelper from \"../../../helpers/authHelper\";\r\nimport { ADD_POST } from \"../../../../core/graphql/Mutations\";\r\nimport { useMutation } from \"@apollo/react-hooks\";\r\nimport { AddPostContext } from \"../../../contexts/AddPostContext\";\r\n\r\nlet imagesUrl = [];\r\nconst TitleAndPriceInfo = () => {\r\n\tconst { state, dispatch } = useContext(AddPostContext);\r\n\tconst { step, adPost } = state;\r\n\r\n\tconst [errors, setError] = useState(\"\");\r\n\tconst [btnLoading, setBtnLoading] = useState(false);\r\n\tconst [postMutation] = useMutation(ADD_POST);\r\n\tconst handleDraftingPost = async () => {\r\n\t\tawait AuthHelper.refreshToken();\r\n\t\tsetBtnLoading(true);\r\n\t\tif (adPost.localGallery.length) {\r\n\t\t\timagesUrl = await uploadMultipleImages(adPost.localGallery);\r\n\t\t\tif (imagesUrl && imagesUrl.length > 0) {\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: \"UPDATE_FULL_ADPOST\",\r\n\t\t\t\t\tpayload: {\r\n\t\t\t\t\t\tgallery: adPost.gallery.concat(imagesUrl[0]),\r\n\t\t\t\t\t\timage: !adPost.image.url ? imagesUrl[0][0] : adPost.image,\r\n\t\t\t\t\t\tlocalImage: {},\r\n\t\t\t\t\t\tlocalGallery: [],\r\n\t\t\t\t\t},\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\ttry {\r\n\t\t\t\tconst data = await postMutation({\r\n\t\t\t\t\tvariables: {\r\n\t\t\t\t\t\tpost: finalData,\r\n\t\t\t\t\t},\r\n\t\t\t\t});\r\n\t\t\t\tsetBtnLoading(false);\r\n\t\t\t\tif (!adPost.id) {\r\n\t\t\t\t\tdispatch({\r\n\t\t\t\t\t\ttype: \"UPDATE_ADPOST\",\r\n\t\t\t\t\t\tpayload: { key: \"id\", value: data.data.addPost.id },\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t} catch (error) {\r\n\t\t\t\tsetBtnLoading(false);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\tconst {\r\n\t\tpreImage,\r\n\t\tpreGallery,\r\n\t\tlocalImage,\r\n\t\tlocalGallery,\r\n\t\tlocation,\r\n\t\t...prossedAdPostData\r\n\t} = adPost;\r\n\tlet finalData = prossedAdPostData;\r\n\tif (location && location.lat) {\r\n\t\tfinalData = {\r\n\t\t\t...prossedAdPostData,\r\n\t\t\tlocation,\r\n\t\t};\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\t(async function() {\r\n\t\t\tif (imagesUrl.length) {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tconst data = await postMutation({\r\n\t\t\t\t\t\tvariables: {\r\n\t\t\t\t\t\t\tpost: finalData,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t});\r\n\t\t\t\t\tconsole.log(data, \"data\");\r\n\t\t\t\t\tsetBtnLoading(false);\r\n\t\t\t\t\tif (!adPost.id) {\r\n\t\t\t\t\t\tdispatch({\r\n\t\t\t\t\t\t\ttype: \"UPDATE_ADPOST\",\r\n\t\t\t\t\t\t\tpayload: { key: \"id\", value: data.data.addPost.id },\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t} catch (error) {\r\n\t\t\t\t\tsetBtnLoading(false);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t})();\r\n\t}, [prossedAdPostData.gallery]);\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<Text\r\n\t\t\t\tcontent=\"Enter the below details\"\r\n\t\t\t\tpb={20}\r\n\t\t\t\tstyle={{ fontSize: 16, fontWeight: 400, color: \"#595959\" }}\r\n\t\t\t/>\r\n\t\t\t<Input\r\n\t\t\t\telementType=\"input\"\r\n\t\t\t\tvalue={adPost.title}\r\n\t\t\t\telementConfig={{\r\n\t\t\t\t\ttype: \"text\",\r\n\t\t\t\t\trequired: \"required\",\r\n\t\t\t\t}}\r\n\t\t\t\tlabel=\"Title\"\r\n\t\t\t\tchanged={(title) => {\r\n\t\t\t\t\tdispatch({\r\n\t\t\t\t\t\ttype: \"UPDATE_ADPOST\",\r\n\t\t\t\t\t\tpayload: { key: \"title\", value: title.target.value },\r\n\t\t\t\t\t});\r\n\t\t\t\t\t// if (adPost.slug === '') {\r\n\t\t\t\t\tdispatch({\r\n\t\t\t\t\t\ttype: \"UPDATE_ADPOST\",\r\n\t\t\t\t\t\tpayload: { key: \"slug\", value: getSlug(title.target.value) },\r\n\t\t\t\t\t});\r\n\t\t\t\t\t// }\r\n\t\t\t\t}}\r\n\t\t\t/>\r\n\t\t\t<Input\r\n\t\t\t\telementType=\"input\"\r\n\t\t\t\telementConfig={{\r\n\t\t\t\t\ttype: \"number\",\r\n\t\t\t\t\trequired: \"required\",\r\n\t\t\t\t}}\r\n\t\t\t\tlabel=\"Price\"\r\n\t\t\t\tvalue={adPost.price}\r\n\t\t\t\tchanged={(price) =>\r\n\t\t\t\t\tdispatch({\r\n\t\t\t\t\t\ttype: \"UPDATE_ADPOST\",\r\n\t\t\t\t\t\tpayload: { key: \"price\", value: parseFloat(price.target.value) },\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t\tstyle={{ marginBottom: 40 }}\r\n\t\t\t/>\r\n\t\t\t<Box flexBox justifyContent=\"space-between\" mb={30}>\r\n\t\t\t\t<Text content=\"Negotiable?\" color=\"#595959\" />\r\n\t\t\t\t<Switch\r\n\t\t\t\t\tswitchSize=\"50px\"\r\n\t\t\t\t\tswitchColor=\"#30C56D\"\r\n\t\t\t\t\tbarColor=\"#30C56D\"\r\n\t\t\t\t\tonChange={(val) =>\r\n\t\t\t\t\t\tdispatch({\r\n\t\t\t\t\t\t\ttype: \"UPDATE_ADPOST\",\r\n\t\t\t\t\t\t\tpayload: { key: \"isNegotiable\", value: !adPost.isNegotiable },\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t\tisChecked={adPost.isNegotiable}\r\n\t\t\t\t/>\r\n\t\t\t</Box>\r\n\t\t\t<Box flexBox justifyContent=\"space-between\" mb={30}>\r\n\t\t\t\t<Text content=\"New Condition?\" color=\"#595959\" />\r\n\t\t\t\t<Switch\r\n\t\t\t\t\tswitchSize=\"50px\"\r\n\t\t\t\t\tswitchColor=\"#30C56D\"\r\n\t\t\t\t\tbarColor=\"#30C56D\"\r\n\t\t\t\t\tonChange={(val) => {\r\n\t\t\t\t\t\tdispatch({\r\n\t\t\t\t\t\t\ttype: \"UPDATE_ADPOST\",\r\n\t\t\t\t\t\t\tpayload: { key: \"condition\", value: !adPost.condition },\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}}\r\n\t\t\t\t\tisChecked={adPost.condition}\r\n\t\t\t\t/>\r\n\t\t\t</Box>\r\n\t\t\t<Box flexBox justifyContent=\"space-between\">\r\n\t\t\t\t<Button\r\n\t\t\t\t\ttitle=\"Save\"\r\n\t\t\t\t\ticonPosition=\"left\"\r\n\t\t\t\t\ticon={<Icon icon={archive} size={18} color=\"#8C8C8C\" />}\r\n\t\t\t\t\tonClick={handleDraftingPost}\r\n\t\t\t\t\tvariant=\"textButton\"\r\n\t\t\t\t\tisLoading={btnLoading}\r\n\t\t\t\t/>\r\n\t\t\t\t<Button\r\n\t\t\t\t\ttitle=\"Next\"\r\n\t\t\t\t\ticonPosition=\"right\"\r\n\t\t\t\t\tdisabled={\r\n\t\t\t\t\t\tadPost.title.length === 0 || adPost.price.length === 0 || btnLoading\r\n\t\t\t\t\t}\r\n\t\t\t\t\tonClick={() =>\r\n\t\t\t\t\t\tdispatch({\r\n\t\t\t\t\t\t\ttype: \"UPDATE_STEP\",\r\n\t\t\t\t\t\t\tpayload: { step: step + 1 },\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t\ticon={<Icon icon={chevronRight} size={21} color=\"#ffffff\" />}\r\n\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\tbackgroundColor:\r\n\t\t\t\t\t\t\tadPost.title.length === 0 ||\r\n\t\t\t\t\t\t\tadPost.price.length === 0 ||\r\n\t\t\t\t\t\t\tbtnLoading\r\n\t\t\t\t\t\t\t\t? \"#e2e2e2\"\r\n\t\t\t\t\t\t\t\t: \"#30C56D\",\r\n\t\t\t\t\t}}\r\n\t\t\t\t/>\r\n\t\t\t</Box>\r\n\t\t</>\r\n\t);\r\n};\r\n\r\nexport default TitleAndPriceInfo;\r\n"]},"metadata":{},"sourceType":"module"}