{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport _regeneratorRuntime from \"/Users/mrcea/Desktop/Nunua/template/packages/web/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/mrcea/Desktop/Nunua/template/packages/web/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _jsxFileName = \"/Users/mrcea/Desktop/Nunua/template/packages/web/containers/Layout/index.js\",\n    _this = this,\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport Link from 'next/link';\nimport styled from 'styled-components';\nimport { naviconRound } from 'react-icons-kit/ionicons/naviconRound';\nimport { plusRound } from 'react-icons-kit/ionicons/plusRound';\nimport { more } from 'react-icons-kit/ionicons/more';\nimport { FullPageSpinner } from '../../components/Loader/spinnerLoader';\nimport { LOGOUT } from '../../../core/graphql/Mutations';\nimport { GET_AUTHOR_INFO } from '../../../core/graphql/Profile.query';\nimport { useMutation, useQuery } from '@apollo/react-hooks';\nimport AuthHelper from '../../helpers/authHelper';\nimport { removeFirebaseCookie } from '../../helpers/session';\nimport redirect from '../../helpers/redirect';\nimport { androidClose } from 'react-icons-kit/ionicons/androidClose';\nimport Icon from 'react-icons-kit';\nimport Button from 'reusecore/src/elements/Button';\nimport Navbar from '../../components/Navbar';\nimport Footer from '../../components/Footer';\nimport SideDrawer from 'reusecore/src/elements/Drawer';\nimport { setFirebaseCookie } from '../../helpers/session';\nimport { HOME_PAGE, SEARCH_PAGE, NEAREST_POST_PAGE, RECENT_POST_PAGE, CATEGORIES_PAGE, SINGLE_CATEGORY_PAGE, SINGLE_POST_PAGE, FAVOURITE_PAGE, PROFILE_PAGE, SIGNIN_PAGE, SIGNUP_PAGE, FORGET_PASSWORD_PAGE, RESET_PASSWORD_PAGE, ADD_POST, ACCOUNT_SETTING_PAGE } from '../../../core/navigation/constant';\nvar Main = styled.main.withConfig({\n  displayName: \"Layout__Main\",\n  componentId: \"sc-1ece30d-0\"\n})([\"min-height:100vh;min-height:calc(100vh - 153px);\"]);\n_c = Main;\nvar DrawerWrapper = styled('div').withConfig({\n  displayName: \"Layout__DrawerWrapper\",\n  componentId: \"sc-1ece30d-1\"\n})([\"display:inline-flex;flex-direction:column;height:100%;width:100%;padding:70px 20px 50px;\"]);\n_c2 = DrawerWrapper;\nvar DrawerLink = styled('span').withConfig({\n  displayName: \"Layout__DrawerLink\",\n  componentId: \"sc-1ece30d-2\"\n})([\"display:inline-flex;padding:11px 0;a{color:#333;}\"]);\n_c3 = DrawerLink;\nexport default _s(function (_ref) {\n  _s();\n\n  var children = _ref.children,\n      _ref$userId = _ref.userId,\n      userId = _ref$userId === void 0 ? '' : _ref$userId,\n      history = _ref.history,\n      isLoggedIn = _ref.isLoggedIn,\n      location = _ref.location,\n      logout = _ref.logout,\n      pathname = _ref.pathname;\n\n  var _useState = useState(false),\n      drawerState = _useState[0],\n      toggleDrawer = _useState[1];\n\n  var _useState2 = useState(false),\n      loggingOut = _useState2[0],\n      setloggingOut = _useState2[1];\n\n  var userAvatar = '';\n  var userFallbackAvatar = '';\n\n  var _useQuery = useQuery(GET_AUTHOR_INFO, {\n    variables: {\n      USERNAME: userId\n    }\n  }),\n      data = _useQuery.data,\n      error = _useQuery.error,\n      loading = _useQuery.loading;\n\n  userAvatar = data && data.author && data.author.image && data.author.image.url ? data.author.image.url : '';\n  userFallbackAvatar = data && data.author && data.author.image && data.author.image.largeUrl ? data.author.image.largeUrl : '';\n  useEffect(function () {\n    if (true && localStorage.getItem('currentLocation') === null) {\n      getLocation();\n    }\n  }, []);\n\n  var getLocation = function getLocation() {\n    navigator.geolocation.getCurrentPosition(storePosition);\n  };\n\n  var storePosition = function storePosition(position) {\n    setFirebaseCookie('currentLocation', {\n      lat: position.coords.latitude,\n      lng: position.coords.longitude\n    });\n  };\n\n  var handleLogout = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var isLoggedOut;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              setloggingOut(true);\n              _context.next = 3;\n              return AuthHelper.logout();\n\n            case 3:\n              isLoggedOut = _context.sent;\n              setloggingOut(false);\n\n              if (isLoggedOut === true) {\n                removeFirebaseCookie('id_token');\n                removeFirebaseCookie('user');\n                redirect({}, '/');\n              }\n\n            case 6:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function handleLogout() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var handleToggle = function handleToggle() {\n    return toggleDrawer(!drawerState);\n  };\n\n  var DRAWER_MENU = [{\n    path: HOME_PAGE,\n    name: 'Home'\n  }, {\n    path: \"\".concat(ADD_POST, \"/new\"),\n    name: 'Add Post'\n  }, {\n    path: SEARCH_PAGE,\n    name: 'Search Page'\n  }, {\n    path: NEAREST_POST_PAGE,\n    name: 'Nearest Post Page'\n  }, {\n    path: RECENT_POST_PAGE,\n    name: 'Recent Post Page'\n  }, {\n    path: CATEGORIES_PAGE,\n    name: 'Category Page'\n  }];\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [loggingOut && /*#__PURE__*/_jsxDEV(FullPageSpinner, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 22\n    }, _this), /*#__PURE__*/_jsxDEV(Navbar, {\n      onToggle: handleToggle,\n      userId: userId,\n      history: history,\n      isLoggedIn: isLoggedIn,\n      location: location,\n      logout: handleLogout,\n      buttonIcon: /*#__PURE__*/_jsxDEV(Icon, {\n        icon: naviconRound,\n        size: 21,\n        color: \"#ffffff\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 21\n      }, _this),\n      menuButtonIcon: /*#__PURE__*/_jsxDEV(Icon, {\n        icon: plusRound,\n        size: 20,\n        color: \"#595959\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 25\n      }, _this),\n      dropdownMenuIcon: /*#__PURE__*/_jsxDEV(Icon, {\n        icon: more,\n        size: 40,\n        color: \"#595959\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 27\n      }, _this),\n      pathname: pathname,\n      avatar: [userAvatar, userFallbackAvatar]\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 7\n    }, _this), drawerState && /*#__PURE__*/_jsxDEV(SideDrawer, {\n      open: drawerState,\n      onClose: handleToggle,\n      toggleHandler: handleToggle,\n      isLoggedIn: isLoggedIn,\n      userId: userId,\n      logout: logout,\n      closeButton: /*#__PURE__*/_jsxDEV(Icon, {\n        icon: androidClose,\n        size: 21,\n        color: \"#333333\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 24\n      }, _this),\n      closeButtonStyle: {\n        display: 'inline-flex',\n        position: 'absolute',\n        top: 20,\n        right: 20,\n        cursor: 'pointer'\n      },\n      children: /*#__PURE__*/_jsxDEV(DrawerWrapper, {\n        children: [DRAWER_MENU.map(function (item, index) {\n          return /*#__PURE__*/_jsxDEV(DrawerLink, {\n            children: /*#__PURE__*/_jsxDEV(Link, {\n              href: item.path,\n              children: /*#__PURE__*/_jsxDEV(\"a\", {\n                children: item.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 182,\n                columnNumber: 19\n              }, _this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 181,\n              columnNumber: 17\n            }, _this)\n          }, index, false, {\n            fileName: _jsxFileName,\n            lineNumber: 180,\n            columnNumber: 15\n          }, _this);\n        }), isLoggedIn ? /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(DrawerLink, {\n            children: /*#__PURE__*/_jsxDEV(Link, {\n              href: \"\".concat(PROFILE_PAGE, \"/[username]\"),\n              as: \"\".concat(PROFILE_PAGE, \"/\").concat(userId),\n              children: /*#__PURE__*/_jsxDEV(\"a\", {\n                children: \"Profile\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 194,\n                columnNumber: 21\n              }, _this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 190,\n              columnNumber: 19\n            }, _this)\n          }, PROFILE_PAGE, false, {\n            fileName: _jsxFileName,\n            lineNumber: 189,\n            columnNumber: 17\n          }, _this), /*#__PURE__*/_jsxDEV(DrawerLink, {\n            children: /*#__PURE__*/_jsxDEV(Link, {\n              href: \"\".concat(ACCOUNT_SETTING_PAGE, \"?view=edit-profile\"),\n              children: /*#__PURE__*/_jsxDEV(\"a\", {\n                children: \"Account Setting\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 200,\n                columnNumber: 21\n              }, _this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 199,\n              columnNumber: 19\n            }, _this)\n          }, ACCOUNT_SETTING_PAGE, false, {\n            fileName: _jsxFileName,\n            lineNumber: 198,\n            columnNumber: 17\n          }, _this), /*#__PURE__*/_jsxDEV(Button, {\n            onClick: handleLogout,\n            title: \"Logout\",\n            variant: \"textButton\",\n            width: 1,\n            color: \"#EF5A5A\",\n            style: {\n              minHeight: 'auto',\n              minWidth: 'auto',\n              textDecoration: 'none',\n              justifyContent: 'flex-start',\n              marginTop: 8,\n              marginLeft: '-4px'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 203,\n            columnNumber: 17\n          }, _this)]\n        }, void 0, true) : /*#__PURE__*/_jsxDEV(Link, {\n          href: SIGNIN_PAGE,\n          children: /*#__PURE__*/_jsxDEV(Button, {\n            title: \"Login\",\n            variant: \"textButton\",\n            width: 1,\n            color: \"#30C56D\",\n            style: {\n              minHeight: 'auto',\n              minWidth: 'auto',\n              textDecoration: 'none',\n              justifyContent: 'flex-start',\n              marginTop: 8,\n              marginLeft: '-4px'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 221,\n            columnNumber: 17\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 220,\n          columnNumber: 15\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 11\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 9\n    }, _this), /*#__PURE__*/_jsxDEV(Main, {\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 240,\n      columnNumber: 7\n    }, _this), /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 241,\n      columnNumber: 7\n    }, _this)]\n  }, void 0, true);\n}, \"amqTzBEsXOkS1IyI2DdPaVSwyA0=\", false, function () {\n  return [useQuery];\n});\n\nvar _c, _c2, _c3;\n\n$RefreshReg$(_c, \"Main\");\n$RefreshReg$(_c2, \"DrawerWrapper\");\n$RefreshReg$(_c3, \"DrawerLink\");","map":{"version":3,"sources":["/Users/mrcea/Desktop/Nunua/template/packages/web/containers/Layout/index.js"],"names":["React","useState","useEffect","Link","styled","naviconRound","plusRound","more","FullPageSpinner","LOGOUT","GET_AUTHOR_INFO","useMutation","useQuery","AuthHelper","removeFirebaseCookie","redirect","androidClose","Icon","Button","Navbar","Footer","SideDrawer","setFirebaseCookie","HOME_PAGE","SEARCH_PAGE","NEAREST_POST_PAGE","RECENT_POST_PAGE","CATEGORIES_PAGE","SINGLE_CATEGORY_PAGE","SINGLE_POST_PAGE","FAVOURITE_PAGE","PROFILE_PAGE","SIGNIN_PAGE","SIGNUP_PAGE","FORGET_PASSWORD_PAGE","RESET_PASSWORD_PAGE","ADD_POST","ACCOUNT_SETTING_PAGE","Main","main","DrawerWrapper","DrawerLink","children","userId","history","isLoggedIn","location","logout","pathname","drawerState","toggleDrawer","loggingOut","setloggingOut","userAvatar","userFallbackAvatar","variables","USERNAME","data","error","loading","author","image","url","largeUrl","localStorage","getItem","getLocation","navigator","geolocation","getCurrentPosition","storePosition","position","lat","coords","latitude","lng","longitude","handleLogout","isLoggedOut","handleToggle","DRAWER_MENU","path","name","display","top","right","cursor","map","item","index","minHeight","minWidth","textDecoration","justifyContent","marginTop","marginLeft"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport Link from 'next/link';\nimport styled from 'styled-components';\nimport { naviconRound } from 'react-icons-kit/ionicons/naviconRound';\nimport { plusRound } from 'react-icons-kit/ionicons/plusRound';\nimport { more } from 'react-icons-kit/ionicons/more';\nimport { FullPageSpinner } from '../../components/Loader/spinnerLoader';\nimport { LOGOUT } from '../../../core/graphql/Mutations';\nimport { GET_AUTHOR_INFO } from '../../../core/graphql/Profile.query';\nimport { useMutation, useQuery } from '@apollo/react-hooks';\nimport AuthHelper from '../../helpers/authHelper';\nimport { removeFirebaseCookie } from '../../helpers/session';\nimport redirect from '../../helpers/redirect';\nimport { androidClose } from 'react-icons-kit/ionicons/androidClose';\nimport Icon from 'react-icons-kit';\nimport Button from 'reusecore/src/elements/Button';\nimport Navbar from '../../components/Navbar';\nimport Footer from '../../components/Footer';\nimport SideDrawer from 'reusecore/src/elements/Drawer';\nimport { setFirebaseCookie } from '../../helpers/session';\nimport {\n  HOME_PAGE,\n  SEARCH_PAGE,\n  NEAREST_POST_PAGE,\n  RECENT_POST_PAGE,\n  CATEGORIES_PAGE,\n  SINGLE_CATEGORY_PAGE,\n  SINGLE_POST_PAGE,\n  FAVOURITE_PAGE,\n  PROFILE_PAGE,\n  SIGNIN_PAGE,\n  SIGNUP_PAGE,\n  FORGET_PASSWORD_PAGE,\n  RESET_PASSWORD_PAGE,\n  ADD_POST,\n  ACCOUNT_SETTING_PAGE,\n} from '../../../core/navigation/constant';\n\nconst Main = styled.main`\n  min-height: 100vh;\n  min-height: calc(100vh - 153px);\n`;\n\nconst DrawerWrapper = styled('div')`\n  display: inline-flex;\n  flex-direction: column;\n  height: 100%;\n  width: 100%;\n  padding: 70px 20px 50px;\n`;\n\nconst DrawerLink = styled('span')`\n  display: inline-flex;\n  padding: 11px 0;\n\n  a {\n    color: #333;\n  }\n`;\n\nexport default ({\n  children,\n  userId = '',\n  history,\n  isLoggedIn,\n  location,\n  logout,\n  pathname,\n}) => {\n  const [drawerState, toggleDrawer] = useState(false);\n  const [loggingOut, setloggingOut] = useState(false);\n  let userAvatar = '';\n  let userFallbackAvatar = '';\n  const { data, error, loading } = useQuery(GET_AUTHOR_INFO, {\n    variables: { USERNAME: userId },\n  });\n  userAvatar =\n    data && data.author && data.author.image && data.author.image.url\n      ? data.author.image.url\n      : '';\n  userFallbackAvatar =\n    data && data.author && data.author.image && data.author.image.largeUrl\n      ? data.author.image.largeUrl\n      : '';\n\n  useEffect(() => {\n    if (process.browser && localStorage.getItem('currentLocation') === null) {\n      getLocation();\n    }\n  }, []);\n\n  const getLocation = () => {\n    navigator.geolocation.getCurrentPosition(storePosition);\n  };\n  const storePosition = position => {\n    setFirebaseCookie('currentLocation', {\n      lat: position.coords.latitude,\n      lng: position.coords.longitude,\n    });\n  };\n\n  const handleLogout = async () => {\n    setloggingOut(true);\n\n    const isLoggedOut = await AuthHelper.logout();\n\n    setloggingOut(false);\n\n    if (isLoggedOut === true) {\n      removeFirebaseCookie('id_token');\n      removeFirebaseCookie('user');\n      redirect({}, '/');\n    }\n  };\n\n  const handleToggle = () => toggleDrawer(!drawerState);\n\n  const DRAWER_MENU = [\n    {\n      path: HOME_PAGE,\n      name: 'Home',\n    },\n    {\n      path: `${ADD_POST}/new`,\n      name: 'Add Post',\n    },\n    {\n      path: SEARCH_PAGE,\n      name: 'Search Page',\n    },\n    {\n      path: NEAREST_POST_PAGE,\n      name: 'Nearest Post Page',\n    },\n    {\n      path: RECENT_POST_PAGE,\n      name: 'Recent Post Page',\n    },\n    {\n      path: CATEGORIES_PAGE,\n      name: 'Category Page',\n    },\n  ];\n\n  return (\n    <>\n      {loggingOut && <FullPageSpinner />}\n      <Navbar\n        onToggle={handleToggle}\n        userId={userId}\n        history={history}\n        isLoggedIn={isLoggedIn}\n        location={location}\n        logout={handleLogout}\n        buttonIcon={<Icon icon={naviconRound} size={21} color=\"#ffffff\" />}\n        menuButtonIcon={<Icon icon={plusRound} size={20} color=\"#595959\" />}\n        dropdownMenuIcon={<Icon icon={more} size={40} color=\"#595959\" />}\n        pathname={pathname}\n        avatar={[userAvatar, userFallbackAvatar]}\n      />\n      {drawerState && (\n        <SideDrawer\n          open={drawerState}\n          onClose={handleToggle}\n          toggleHandler={handleToggle}\n          isLoggedIn={isLoggedIn}\n          userId={userId}\n          logout={logout}\n          closeButton={<Icon icon={androidClose} size={21} color=\"#333333\" />}\n          closeButtonStyle={{\n            display: 'inline-flex',\n            position: 'absolute',\n            top: 20,\n            right: 20,\n            cursor: 'pointer',\n          }}\n        >\n          <DrawerWrapper>\n            {DRAWER_MENU.map((item, index) => (\n              <DrawerLink key={index}>\n                <Link href={item.path}>\n                  <a>{item.name}</a>\n                </Link>\n              </DrawerLink>\n            ))}\n\n            {isLoggedIn ? (\n              <>\n                <DrawerLink key={PROFILE_PAGE}>\n                  <Link\n                    href={`${PROFILE_PAGE}/[username]`}\n                    as={`${PROFILE_PAGE}/${userId}`}\n                  >\n                    <a>Profile</a>\n                  </Link>\n                </DrawerLink>\n\n                <DrawerLink key={ACCOUNT_SETTING_PAGE}>\n                  <Link href={`${ACCOUNT_SETTING_PAGE}?view=edit-profile`}>\n                    <a>Account Setting</a>\n                  </Link>\n                </DrawerLink>\n                <Button\n                  onClick={handleLogout}\n                  title=\"Logout\"\n                  variant=\"textButton\"\n                  width={1}\n                  color=\"#EF5A5A\"\n                  style={{\n                    minHeight: 'auto',\n                    minWidth: 'auto',\n                    textDecoration: 'none',\n                    justifyContent: 'flex-start',\n                    marginTop: 8,\n                    marginLeft: '-4px',\n                  }}\n                />\n              </>\n            ) : (\n              <Link href={SIGNIN_PAGE}>\n                <Button\n                  title=\"Login\"\n                  variant=\"textButton\"\n                  width={1}\n                  color=\"#30C56D\"\n                  style={{\n                    minHeight: 'auto',\n                    minWidth: 'auto',\n                    textDecoration: 'none',\n                    justifyContent: 'flex-start',\n                    marginTop: 8,\n                    marginLeft: '-4px',\n                  }}\n                />\n              </Link>\n            )}\n          </DrawerWrapper>\n        </SideDrawer>\n      )}\n      <Main>{children}</Main>\n      <Footer />\n    </>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}