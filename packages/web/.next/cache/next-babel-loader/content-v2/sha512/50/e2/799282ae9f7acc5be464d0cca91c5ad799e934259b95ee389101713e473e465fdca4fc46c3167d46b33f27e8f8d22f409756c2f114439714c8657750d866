{"ast":null,"code":"import { getThumbUrl } from './generateThumbUrl';\nimport { storage } from './init';\n/**\r\n * Helper functions to upload multiple image to firebase storage\r\n * @param {Array} images\r\n */\n\nexport async function uploadMultipleImages(images) {\n  let allImages = [];\n\n  storage.ref().constructor.prototype.putFiles = function (files) {\n    var ref = this;\n    return Promise.all(files.map(function (file) {\n      return ref.child(file.name).put(file);\n    }));\n  };\n\n  const uploadedImages = await storage.ref().putFiles(images).then(function (metadatas) {\n    return metadatas;\n  });\n  return Promise.all(uploadedImages.map(snapshot => {\n    return new Promise(async (resolve, reject) => {\n      await snapshot.ref.getDownloadURL().then(function (downloadURL) {\n        const thumbUrl = getThumbUrl(downloadURL);\n        allImages.push({\n          url: thumbUrl,\n          largeUrl: downloadURL\n        });\n      });\n      resolve(allImages);\n    });\n  }));\n}","map":{"version":3,"sources":["C:/Users/olaji/OneDrive/Documents/sellit/template/packages/web/helpers/uploadMultipleImage.js"],"names":["getThumbUrl","storage","uploadMultipleImages","images","allImages","ref","constructor","prototype","putFiles","files","Promise","all","map","file","child","name","put","uploadedImages","then","metadatas","snapshot","resolve","reject","getDownloadURL","downloadURL","thumbUrl","push","url","largeUrl"],"mappings":"AAAA,SAASA,WAAT,QAA4B,oBAA5B;AACA,SAASC,OAAT,QAAwB,QAAxB;AAEA;AACA;AACA;AACA;;AACA,OAAO,eAAeC,oBAAf,CAAoCC,MAApC,EAA4C;AACjD,MAAIC,SAAS,GAAG,EAAhB;;AACAH,EAAAA,OAAO,CAACI,GAAR,GAAcC,WAAd,CAA0BC,SAA1B,CAAoCC,QAApC,GAA+C,UAASC,KAAT,EAAgB;AAC7D,QAAIJ,GAAG,GAAG,IAAV;AACA,WAAOK,OAAO,CAACC,GAAR,CACLF,KAAK,CAACG,GAAN,CAAU,UAASC,IAAT,EAAe;AACvB,aAAOR,GAAG,CAACS,KAAJ,CAAUD,IAAI,CAACE,IAAf,EAAqBC,GAArB,CAAyBH,IAAzB,CAAP;AACD,KAFD,CADK,CAAP;AAKD,GAPD;;AAQA,QAAMI,cAAc,GAAG,MAAMhB,OAAO,CACjCI,GAD0B,GAE1BG,QAF0B,CAEjBL,MAFiB,EAG1Be,IAH0B,CAGrB,UAASC,SAAT,EAAoB;AACxB,WAAOA,SAAP;AACD,GAL0B,CAA7B;AAOA,SAAOT,OAAO,CAACC,GAAR,CACLM,cAAc,CAACL,GAAf,CAAmBQ,QAAQ,IAAI;AAC7B,WAAO,IAAIV,OAAJ,CAAY,OAAOW,OAAP,EAAgBC,MAAhB,KAA2B;AAC5C,YAAMF,QAAQ,CAACf,GAAT,CAAakB,cAAb,GAA8BL,IAA9B,CAAmC,UAASM,WAAT,EAAsB;AAC7D,cAAMC,QAAQ,GAAGzB,WAAW,CAACwB,WAAD,CAA5B;AACApB,QAAAA,SAAS,CAACsB,IAAV,CAAe;AACbC,UAAAA,GAAG,EAAEF,QADQ;AAEbG,UAAAA,QAAQ,EAAEJ;AAFG,SAAf;AAID,OANK,CAAN;AAOAH,MAAAA,OAAO,CAACjB,SAAD,CAAP;AACD,KATM,CAAP;AAUD,GAXD,CADK,CAAP;AAcD","sourcesContent":["import { getThumbUrl } from './generateThumbUrl';\r\nimport { storage } from './init';\r\n\r\n/**\r\n * Helper functions to upload multiple image to firebase storage\r\n * @param {Array} images\r\n */\r\nexport async function uploadMultipleImages(images) {\r\n  let allImages = [];\r\n  storage.ref().constructor.prototype.putFiles = function(files) {\r\n    var ref = this;\r\n    return Promise.all(\r\n      files.map(function(file) {\r\n        return ref.child(file.name).put(file);\r\n      })\r\n    );\r\n  };\r\n  const uploadedImages = await storage\r\n    .ref()\r\n    .putFiles(images)\r\n    .then(function(metadatas) {\r\n      return metadatas;\r\n    });\r\n\r\n  return Promise.all(\r\n    uploadedImages.map(snapshot => {\r\n      return new Promise(async (resolve, reject) => {\r\n        await snapshot.ref.getDownloadURL().then(function(downloadURL) {\r\n          const thumbUrl = getThumbUrl(downloadURL);\r\n          allImages.push({\r\n            url: thumbUrl,\r\n            largeUrl: downloadURL,\r\n          });\r\n        });\r\n        resolve(allImages);\r\n      });\r\n    })\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}