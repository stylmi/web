{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\olaji\\\\OneDrive\\\\Documents\\\\sellit\\\\template\\\\packages\\\\web\\\\containers\\\\Layout\\\\index.js\";\nvar __jsx = React.createElement;\nimport React, { useState, useEffect } from 'react';\nimport Link from 'next/link';\nimport styled from 'styled-components';\nimport { naviconRound } from 'react-icons-kit/ionicons/naviconRound';\nimport { plusRound } from 'react-icons-kit/ionicons/plusRound';\nimport { more } from 'react-icons-kit/ionicons/more';\nimport { FullPageSpinner } from '../../components/Loader/spinnerLoader';\nimport { LOGOUT } from '../../../core/graphql/Mutations';\nimport { GET_AUTHOR_INFO } from '../../../core/graphql/Profile.query';\nimport { useMutation, useQuery } from '@apollo/react-hooks';\nimport AuthHelper from '../../helpers/authHelper';\nimport { removeFirebaseCookie } from '../../helpers/session';\nimport redirect from '../../helpers/redirect';\nimport { androidClose } from 'react-icons-kit/ionicons/androidClose';\nimport Icon from 'react-icons-kit';\nimport Button from '../../../reusecore/src/elements/Button';\nimport Navbar from '../../components/Navbar';\nimport Footer from '../../components/Footer';\nimport SideDrawer from '../../../reusecore/src/elements/Drawer';\nimport { setFirebaseCookie } from '../../helpers/session';\nimport { HOME_PAGE, SEARCH_PAGE, NEAREST_POST_PAGE, RECENT_POST_PAGE, CATEGORIES_PAGE, SINGLE_CATEGORY_PAGE, SINGLE_POST_PAGE, FAVOURITE_PAGE, PROFILE_PAGE, SIGNIN_PAGE, SIGNUP_PAGE, FORGET_PASSWORD_PAGE, RESET_PASSWORD_PAGE, ADD_POST, ACCOUNT_SETTING_PAGE } from '../../../core/navigation/constant';\nconst Main = styled.main.withConfig({\n  displayName: \"Layout__Main\",\n  componentId: \"sc-1ece30d-0\"\n})([\"min-height:100vh;min-height:calc(100vh - 153px);\"]);\nconst DrawerWrapper = styled('div').withConfig({\n  displayName: \"Layout__DrawerWrapper\",\n  componentId: \"sc-1ece30d-1\"\n})([\"display:inline-flex;flex-direction:column;height:100%;width:100%;padding:70px 20px 50px;\"]);\nconst DrawerLink = styled('span').withConfig({\n  displayName: \"Layout__DrawerLink\",\n  componentId: \"sc-1ece30d-2\"\n})([\"display:inline-flex;padding:11px 0;a{color:#333;}\"]);\nexport default (({\n  children,\n  userId = '',\n  history,\n  isLoggedIn,\n  location,\n  logout,\n  pathname\n}) => {\n  const {\n    0: drawerState,\n    1: toggleDrawer\n  } = useState(false);\n  const {\n    0: loggingOut,\n    1: setloggingOut\n  } = useState(false);\n  let userAvatar = '';\n  let userFallbackAvatar = '';\n  const {\n    data,\n    error,\n    loading\n  } = useQuery(GET_AUTHOR_INFO, {\n    variables: {\n      USERNAME: userId\n    }\n  });\n  userAvatar = data && data.author && data.author.image && data.author.image.url ? data.author.image.url : '';\n  userFallbackAvatar = data && data.author && data.author.image && data.author.image.largeUrl ? data.author.image.largeUrl : '';\n  useEffect(() => {\n    if (false && localStorage.getItem('currentLocation') === null) {\n      getLocation();\n    }\n  }, []);\n\n  const getLocation = () => {\n    navigator.geolocation.getCurrentPosition(storePosition);\n  };\n\n  const storePosition = position => {\n    setFirebaseCookie('currentLocation', {\n      lat: position.coords.latitude,\n      lng: position.coords.longitude\n    });\n  };\n\n  const handleLogout = async () => {\n    setloggingOut(true);\n    const isLoggedOut = await AuthHelper.logout();\n    setloggingOut(false);\n\n    if (isLoggedOut === true) {\n      removeFirebaseCookie('id_token');\n      removeFirebaseCookie('user');\n      redirect({}, '/');\n    }\n  };\n\n  const handleToggle = () => toggleDrawer(!drawerState);\n\n  const DRAWER_MENU = [{\n    path: HOME_PAGE,\n    name: 'Home'\n  }, {\n    path: `${ADD_POST}/new`,\n    name: 'Add Post'\n  }, {\n    path: SEARCH_PAGE,\n    name: 'Search Page'\n  }, {\n    path: NEAREST_POST_PAGE,\n    name: 'Nearest Post Page'\n  }, {\n    path: RECENT_POST_PAGE,\n    name: 'Recent Post Page'\n  }, {\n    path: CATEGORIES_PAGE,\n    name: 'Category Page'\n  }];\n  return __jsx(React.Fragment, null, loggingOut && __jsx(FullPageSpinner, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 22\n    }\n  }), __jsx(Navbar, {\n    onToggle: handleToggle,\n    userId: userId,\n    history: history,\n    isLoggedIn: isLoggedIn,\n    location: location,\n    logout: handleLogout,\n    buttonIcon: __jsx(Icon, {\n      icon: naviconRound,\n      size: 21,\n      color: \"#ffffff\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 21\n      }\n    }),\n    menuButtonIcon: __jsx(Icon, {\n      icon: plusRound,\n      size: 20,\n      color: \"#595959\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 25\n      }\n    }),\n    dropdownMenuIcon: __jsx(Icon, {\n      icon: more,\n      size: 40,\n      color: \"#595959\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 27\n      }\n    }),\n    pathname: pathname,\n    avatar: [userAvatar, userFallbackAvatar],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 7\n    }\n  }), drawerState && __jsx(SideDrawer, {\n    open: drawerState,\n    onClose: handleToggle,\n    toggleHandler: handleToggle,\n    isLoggedIn: isLoggedIn,\n    userId: userId,\n    logout: logout,\n    closeButton: __jsx(Icon, {\n      icon: androidClose,\n      size: 21,\n      color: \"#333333\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 24\n      }\n    }),\n    closeButtonStyle: {\n      display: 'inline-flex',\n      position: 'absolute',\n      top: 20,\n      right: 20,\n      cursor: 'pointer'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 9\n    }\n  }, __jsx(DrawerWrapper, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 11\n    }\n  }, DRAWER_MENU.map((item, index) => __jsx(DrawerLink, {\n    key: index,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 15\n    }\n  }, __jsx(Link, {\n    href: item.path,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 17\n    }\n  }, __jsx(\"a\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 19\n    }\n  }, item.name)))), isLoggedIn ? __jsx(React.Fragment, null, __jsx(DrawerLink, {\n    key: PROFILE_PAGE,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 17\n    }\n  }, __jsx(Link, {\n    href: `${PROFILE_PAGE}/[username]`,\n    as: `${PROFILE_PAGE}/${userId}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 19\n    }\n  }, __jsx(\"a\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 21\n    }\n  }, \"Profile\"))), __jsx(DrawerLink, {\n    key: ACCOUNT_SETTING_PAGE,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 17\n    }\n  }, __jsx(Link, {\n    href: `${ACCOUNT_SETTING_PAGE}?view=edit-profile`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 19\n    }\n  }, __jsx(\"a\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 200,\n      columnNumber: 21\n    }\n  }, \"Account Setting\"))), __jsx(Button, {\n    onClick: handleLogout,\n    title: \"Logout\",\n    variant: \"textButton\",\n    width: 1,\n    color: \"#EF5A5A\",\n    style: {\n      minHeight: 'auto',\n      minWidth: 'auto',\n      textDecoration: 'none',\n      justifyContent: 'flex-start',\n      marginTop: 8,\n      marginLeft: '-4px'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 203,\n      columnNumber: 17\n    }\n  })) : __jsx(Link, {\n    href: SIGNIN_PAGE,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 220,\n      columnNumber: 15\n    }\n  }, __jsx(Button, {\n    title: \"Login\",\n    variant: \"textButton\",\n    width: 1,\n    color: \"#30C56D\",\n    style: {\n      minHeight: 'auto',\n      minWidth: 'auto',\n      textDecoration: 'none',\n      justifyContent: 'flex-start',\n      marginTop: 8,\n      marginLeft: '-4px'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 221,\n      columnNumber: 17\n    }\n  })))), __jsx(Main, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 240,\n      columnNumber: 7\n    }\n  }, children), __jsx(Footer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 241,\n      columnNumber: 7\n    }\n  }));\n});","map":{"version":3,"sources":["C:/Users/olaji/OneDrive/Documents/sellit/template/packages/web/containers/Layout/index.js"],"names":["React","useState","useEffect","Link","styled","naviconRound","plusRound","more","FullPageSpinner","LOGOUT","GET_AUTHOR_INFO","useMutation","useQuery","AuthHelper","removeFirebaseCookie","redirect","androidClose","Icon","Button","Navbar","Footer","SideDrawer","setFirebaseCookie","HOME_PAGE","SEARCH_PAGE","NEAREST_POST_PAGE","RECENT_POST_PAGE","CATEGORIES_PAGE","SINGLE_CATEGORY_PAGE","SINGLE_POST_PAGE","FAVOURITE_PAGE","PROFILE_PAGE","SIGNIN_PAGE","SIGNUP_PAGE","FORGET_PASSWORD_PAGE","RESET_PASSWORD_PAGE","ADD_POST","ACCOUNT_SETTING_PAGE","Main","main","DrawerWrapper","DrawerLink","children","userId","history","isLoggedIn","location","logout","pathname","drawerState","toggleDrawer","loggingOut","setloggingOut","userAvatar","userFallbackAvatar","data","error","loading","variables","USERNAME","author","image","url","largeUrl","localStorage","getItem","getLocation","navigator","geolocation","getCurrentPosition","storePosition","position","lat","coords","latitude","lng","longitude","handleLogout","isLoggedOut","handleToggle","DRAWER_MENU","path","name","display","top","right","cursor","map","item","index","minHeight","minWidth","textDecoration","justifyContent","marginTop","marginLeft"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport Link from 'next/link';\r\nimport styled from 'styled-components';\r\nimport { naviconRound } from 'react-icons-kit/ionicons/naviconRound';\r\nimport { plusRound } from 'react-icons-kit/ionicons/plusRound';\r\nimport { more } from 'react-icons-kit/ionicons/more';\r\nimport { FullPageSpinner } from '../../components/Loader/spinnerLoader';\r\nimport { LOGOUT } from '../../../core/graphql/Mutations';\r\nimport { GET_AUTHOR_INFO } from '../../../core/graphql/Profile.query';\r\nimport { useMutation, useQuery } from '@apollo/react-hooks';\r\nimport AuthHelper from '../../helpers/authHelper';\r\nimport { removeFirebaseCookie } from '../../helpers/session';\r\nimport redirect from '../../helpers/redirect';\r\nimport { androidClose } from 'react-icons-kit/ionicons/androidClose';\r\nimport Icon from 'react-icons-kit';\r\nimport Button from '../../../reusecore/src/elements/Button';\r\nimport Navbar from '../../components/Navbar';\r\nimport Footer from '../../components/Footer';\r\nimport SideDrawer from '../../../reusecore/src/elements/Drawer';\r\nimport { setFirebaseCookie } from '../../helpers/session';\r\nimport {\r\n  HOME_PAGE,\r\n  SEARCH_PAGE,\r\n  NEAREST_POST_PAGE,\r\n  RECENT_POST_PAGE,\r\n  CATEGORIES_PAGE,\r\n  SINGLE_CATEGORY_PAGE,\r\n  SINGLE_POST_PAGE,\r\n  FAVOURITE_PAGE,\r\n  PROFILE_PAGE,\r\n  SIGNIN_PAGE,\r\n  SIGNUP_PAGE,\r\n  FORGET_PASSWORD_PAGE,\r\n  RESET_PASSWORD_PAGE,\r\n  ADD_POST,\r\n  ACCOUNT_SETTING_PAGE,\r\n} from '../../../core/navigation/constant';\r\n\r\nconst Main = styled.main`\r\n  min-height: 100vh;\r\n  min-height: calc(100vh - 153px);\r\n`;\r\n\r\nconst DrawerWrapper = styled('div')`\r\n  display: inline-flex;\r\n  flex-direction: column;\r\n  height: 100%;\r\n  width: 100%;\r\n  padding: 70px 20px 50px;\r\n`;\r\n\r\nconst DrawerLink = styled('span')`\r\n  display: inline-flex;\r\n  padding: 11px 0;\r\n\r\n  a {\r\n    color: #333;\r\n  }\r\n`;\r\n\r\nexport default ({\r\n  children,\r\n  userId = '',\r\n  history,\r\n  isLoggedIn,\r\n  location,\r\n  logout,\r\n  pathname,\r\n}) => {\r\n  const [drawerState, toggleDrawer] = useState(false);\r\n  const [loggingOut, setloggingOut] = useState(false);\r\n  let userAvatar = '';\r\n  let userFallbackAvatar = '';\r\n  const { data, error, loading } = useQuery(GET_AUTHOR_INFO, {\r\n    variables: { USERNAME: userId },\r\n  });\r\n  userAvatar =\r\n    data && data.author && data.author.image && data.author.image.url\r\n      ? data.author.image.url\r\n      : '';\r\n  userFallbackAvatar =\r\n    data && data.author && data.author.image && data.author.image.largeUrl\r\n      ? data.author.image.largeUrl\r\n      : '';\r\n\r\n  useEffect(() => {\r\n    if (process.browser && localStorage.getItem('currentLocation') === null) {\r\n      getLocation();\r\n    }\r\n  }, []);\r\n\r\n  const getLocation = () => {\r\n    navigator.geolocation.getCurrentPosition(storePosition);\r\n  };\r\n  const storePosition = position => {\r\n    setFirebaseCookie('currentLocation', {\r\n      lat: position.coords.latitude,\r\n      lng: position.coords.longitude,\r\n    });\r\n  };\r\n\r\n  const handleLogout = async () => {\r\n    setloggingOut(true);\r\n\r\n    const isLoggedOut = await AuthHelper.logout();\r\n\r\n    setloggingOut(false);\r\n\r\n    if (isLoggedOut === true) {\r\n      removeFirebaseCookie('id_token');\r\n      removeFirebaseCookie('user');\r\n      redirect({}, '/');\r\n    }\r\n  };\r\n\r\n  const handleToggle = () => toggleDrawer(!drawerState);\r\n\r\n  const DRAWER_MENU = [\r\n    {\r\n      path: HOME_PAGE,\r\n      name: 'Home',\r\n    },\r\n    {\r\n      path: `${ADD_POST}/new`,\r\n      name: 'Add Post',\r\n    },\r\n    {\r\n      path: SEARCH_PAGE,\r\n      name: 'Search Page',\r\n    },\r\n    {\r\n      path: NEAREST_POST_PAGE,\r\n      name: 'Nearest Post Page',\r\n    },\r\n    {\r\n      path: RECENT_POST_PAGE,\r\n      name: 'Recent Post Page',\r\n    },\r\n    {\r\n      path: CATEGORIES_PAGE,\r\n      name: 'Category Page',\r\n    },\r\n  ];\r\n\r\n  return (\r\n    <>\r\n      {loggingOut && <FullPageSpinner />}\r\n      <Navbar\r\n        onToggle={handleToggle}\r\n        userId={userId}\r\n        history={history}\r\n        isLoggedIn={isLoggedIn}\r\n        location={location}\r\n        logout={handleLogout}\r\n        buttonIcon={<Icon icon={naviconRound} size={21} color=\"#ffffff\" />}\r\n        menuButtonIcon={<Icon icon={plusRound} size={20} color=\"#595959\" />}\r\n        dropdownMenuIcon={<Icon icon={more} size={40} color=\"#595959\" />}\r\n        pathname={pathname}\r\n        avatar={[userAvatar, userFallbackAvatar]}\r\n      />\r\n      {drawerState && (\r\n        <SideDrawer\r\n          open={drawerState}\r\n          onClose={handleToggle}\r\n          toggleHandler={handleToggle}\r\n          isLoggedIn={isLoggedIn}\r\n          userId={userId}\r\n          logout={logout}\r\n          closeButton={<Icon icon={androidClose} size={21} color=\"#333333\" />}\r\n          closeButtonStyle={{\r\n            display: 'inline-flex',\r\n            position: 'absolute',\r\n            top: 20,\r\n            right: 20,\r\n            cursor: 'pointer',\r\n          }}\r\n        >\r\n          <DrawerWrapper>\r\n            {DRAWER_MENU.map((item, index) => (\r\n              <DrawerLink key={index}>\r\n                <Link href={item.path}>\r\n                  <a>{item.name}</a>\r\n                </Link>\r\n              </DrawerLink>\r\n            ))}\r\n\r\n            {isLoggedIn ? (\r\n              <>\r\n                <DrawerLink key={PROFILE_PAGE}>\r\n                  <Link\r\n                    href={`${PROFILE_PAGE}/[username]`}\r\n                    as={`${PROFILE_PAGE}/${userId}`}\r\n                  >\r\n                    <a>Profile</a>\r\n                  </Link>\r\n                </DrawerLink>\r\n\r\n                <DrawerLink key={ACCOUNT_SETTING_PAGE}>\r\n                  <Link href={`${ACCOUNT_SETTING_PAGE}?view=edit-profile`}>\r\n                    <a>Account Setting</a>\r\n                  </Link>\r\n                </DrawerLink>\r\n                <Button\r\n                  onClick={handleLogout}\r\n                  title=\"Logout\"\r\n                  variant=\"textButton\"\r\n                  width={1}\r\n                  color=\"#EF5A5A\"\r\n                  style={{\r\n                    minHeight: 'auto',\r\n                    minWidth: 'auto',\r\n                    textDecoration: 'none',\r\n                    justifyContent: 'flex-start',\r\n                    marginTop: 8,\r\n                    marginLeft: '-4px',\r\n                  }}\r\n                />\r\n              </>\r\n            ) : (\r\n              <Link href={SIGNIN_PAGE}>\r\n                <Button\r\n                  title=\"Login\"\r\n                  variant=\"textButton\"\r\n                  width={1}\r\n                  color=\"#30C56D\"\r\n                  style={{\r\n                    minHeight: 'auto',\r\n                    minWidth: 'auto',\r\n                    textDecoration: 'none',\r\n                    justifyContent: 'flex-start',\r\n                    marginTop: 8,\r\n                    marginLeft: '-4px',\r\n                  }}\r\n                />\r\n              </Link>\r\n            )}\r\n          </DrawerWrapper>\r\n        </SideDrawer>\r\n      )}\r\n      <Main>{children}</Main>\r\n      <Footer />\r\n    </>\r\n  );\r\n};\r\n"]},"metadata":{},"sourceType":"module"}