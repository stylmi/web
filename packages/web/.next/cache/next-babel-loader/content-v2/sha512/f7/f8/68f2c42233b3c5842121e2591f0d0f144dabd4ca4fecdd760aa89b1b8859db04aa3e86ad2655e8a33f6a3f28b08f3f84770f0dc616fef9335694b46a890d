{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport _defineProperty from \"C:/Users/olaji/OneDrive/Documents/sellit/template/packages/web/node_modules/next/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _objectWithoutProperties from \"C:/Users/olaji/OneDrive/Documents/sellit/template/packages/web/node_modules/next/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport _regeneratorRuntime from \"C:/Users/olaji/OneDrive/Documents/sellit/template/packages/web/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"C:/Users/olaji/OneDrive/Documents/sellit/template/packages/web/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"C:/Users/olaji/OneDrive/Documents/sellit/template/packages/web/node_modules/next/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\olaji\\\\OneDrive\\\\Documents\\\\sellit\\\\template\\\\packages\\\\web\\\\containers\\\\AddPost\\\\TitleAndPriceInfo\\\\index.js\",\n    _this = this,\n    _s = $RefreshSig$();\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useContext, useEffect, useState } from \"react\";\nimport getSlug from \"speakingurl\";\nimport { uploadMultipleImages } from \"../../../helpers/uploadMultipleImage\";\nimport Icon from \"react-icons-kit\";\nimport { archive } from \"react-icons-kit/ionicons/archive\";\nimport { chevronRight } from \"react-icons-kit/ionicons/chevronRight\";\nimport Switch from \"../../../../reusecore/src/elements/Switch\";\nimport Button from \"../../../../reusecore/src/elements/Button\";\nimport Text from \"../../../../reusecore/src/elements/Text\";\nimport Box from \"../../../../reusecore/src/elements/Box\";\nimport Input from \"../../../components/Input\";\nimport AuthHelper from \"../../../helpers/authHelper\";\nimport { ADD_POST } from \"../../../../core/graphql/Mutations\";\nimport { useMutation } from \"@apollo/react-hooks\";\nimport { AddPostContext } from \"../../../contexts/AddPostContext\";\nvar imagesUrl = [];\n\nvar TitleAndPriceInfo = function TitleAndPriceInfo() {\n  _s();\n\n  var _useContext = useContext(AddPostContext),\n      state = _useContext.state,\n      dispatch = _useContext.dispatch;\n\n  var step = state.step,\n      adPost = state.adPost;\n\n  var _useState = useState(\"\"),\n      errors = _useState[0],\n      setError = _useState[1];\n\n  var _useState2 = useState(false),\n      btnLoading = _useState2[0],\n      setBtnLoading = _useState2[1];\n\n  var _useMutation = useMutation(ADD_POST),\n      _useMutation2 = _slicedToArray(_useMutation, 1),\n      postMutation = _useMutation2[0];\n\n  var handleDraftingPost = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var data;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return AuthHelper.refreshToken();\n\n            case 2:\n              setBtnLoading(true);\n\n              if (!adPost.localGallery.length) {\n                _context.next = 10;\n                break;\n              }\n\n              _context.next = 6;\n              return uploadMultipleImages(adPost.localGallery);\n\n            case 6:\n              imagesUrl = _context.sent;\n\n              if (imagesUrl && imagesUrl.length > 0) {\n                dispatch({\n                  type: \"UPDATE_FULL_ADPOST\",\n                  payload: {\n                    gallery: adPost.gallery.concat(imagesUrl[0]),\n                    image: !adPost.image.url ? imagesUrl[0][0] : adPost.image,\n                    localImage: {},\n                    localGallery: []\n                  }\n                });\n              }\n\n              _context.next = 21;\n              break;\n\n            case 10:\n              _context.prev = 10;\n              _context.next = 13;\n              return postMutation({\n                variables: {\n                  post: finalData\n                }\n              });\n\n            case 13:\n              data = _context.sent;\n              setBtnLoading(false);\n\n              if (!adPost.id) {\n                dispatch({\n                  type: \"UPDATE_ADPOST\",\n                  payload: {\n                    key: \"id\",\n                    value: data.data.addPost.id\n                  }\n                });\n              }\n\n              _context.next = 21;\n              break;\n\n            case 18:\n              _context.prev = 18;\n              _context.t0 = _context[\"catch\"](10);\n              setBtnLoading(false);\n\n            case 21:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[10, 18]]);\n    }));\n\n    return function handleDraftingPost() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  var preImage = adPost.preImage,\n      preGallery = adPost.preGallery,\n      localImage = adPost.localImage,\n      localGallery = adPost.localGallery,\n      location = adPost.location,\n      prossedAdPostData = _objectWithoutProperties(adPost, [\"preImage\", \"preGallery\", \"localImage\", \"localGallery\", \"location\"]);\n\n  var finalData = prossedAdPostData;\n\n  if (location && location.lat) {\n    finalData = _objectSpread(_objectSpread({}, prossedAdPostData), {}, {\n      location: location\n    });\n  }\n\n  useEffect(function () {\n    _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n      var data;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              if (!imagesUrl.length) {\n                _context2.next = 13;\n                break;\n              }\n\n              _context2.prev = 1;\n              _context2.next = 4;\n              return postMutation({\n                variables: {\n                  post: finalData\n                }\n              });\n\n            case 4:\n              data = _context2.sent;\n              console.log(data, \"data\");\n              setBtnLoading(false);\n\n              if (!adPost.id) {\n                dispatch({\n                  type: \"UPDATE_ADPOST\",\n                  payload: {\n                    key: \"id\",\n                    value: data.data.addPost.id\n                  }\n                });\n              }\n\n              _context2.next = 13;\n              break;\n\n            case 10:\n              _context2.prev = 10;\n              _context2.t0 = _context2[\"catch\"](1);\n              setBtnLoading(false);\n\n            case 13:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2, null, [[1, 10]]);\n    }))();\n  }, [prossedAdPostData.gallery]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Text, {\n      content: \"Enter the below details\",\n      pb: 20,\n      style: {\n        fontSize: 16,\n        fontWeight: 400,\n        color: \"#595959\"\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 4\n    }, _this), /*#__PURE__*/_jsxDEV(Input, {\n      elementType: \"input\",\n      value: adPost.title,\n      elementConfig: {\n        type: \"text\",\n        required: \"required\"\n      },\n      label: \"Title\",\n      changed: function changed(title) {\n        dispatch({\n          type: \"UPDATE_ADPOST\",\n          payload: {\n            key: \"title\",\n            value: title.target.value\n          }\n        }); // if (adPost.slug === '') {\n\n        dispatch({\n          type: \"UPDATE_ADPOST\",\n          payload: {\n            key: \"slug\",\n            value: getSlug(title.target.value)\n          }\n        }); // }\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 4\n    }, _this), /*#__PURE__*/_jsxDEV(Input, {\n      elementType: \"input\",\n      elementConfig: {\n        type: \"number\",\n        required: \"required\"\n      },\n      label: \"Price\",\n      value: adPost.price,\n      changed: function changed(price) {\n        return dispatch({\n          type: \"UPDATE_ADPOST\",\n          payload: {\n            key: \"price\",\n            value: parseFloat(price.target.value)\n          }\n        });\n      },\n      style: {\n        marginBottom: 40\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 4\n    }, _this), /*#__PURE__*/_jsxDEV(Box, {\n      flexBox: true,\n      justifyContent: \"space-between\",\n      mb: 30,\n      children: [/*#__PURE__*/_jsxDEV(Text, {\n        content: \"Negotiable?\",\n        color: \"#595959\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 5\n      }, _this), /*#__PURE__*/_jsxDEV(Switch, {\n        switchSize: \"50px\",\n        switchColor: \"#30C56D\",\n        barColor: \"#30C56D\",\n        onChange: function onChange(val) {\n          return dispatch({\n            type: \"UPDATE_ADPOST\",\n            payload: {\n              key: \"isNegotiable\",\n              value: !adPost.isNegotiable\n            }\n          });\n        },\n        isChecked: adPost.isNegotiable\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 5\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 4\n    }, _this), /*#__PURE__*/_jsxDEV(Box, {\n      flexBox: true,\n      justifyContent: \"space-between\",\n      mb: 30,\n      children: [/*#__PURE__*/_jsxDEV(Text, {\n        content: \"New Condition?\",\n        color: \"#595959\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 5\n      }, _this), /*#__PURE__*/_jsxDEV(Switch, {\n        switchSize: \"50px\",\n        switchColor: \"#30C56D\",\n        barColor: \"#30C56D\",\n        onChange: function onChange(val) {\n          dispatch({\n            type: \"UPDATE_ADPOST\",\n            payload: {\n              key: \"condition\",\n              value: !adPost.condition\n            }\n          });\n        },\n        isChecked: adPost.condition\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 5\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 4\n    }, _this), /*#__PURE__*/_jsxDEV(Box, {\n      flexBox: true,\n      justifyContent: \"space-between\",\n      children: [/*#__PURE__*/_jsxDEV(Button, {\n        title: \"Save\",\n        iconPosition: \"left\",\n        icon: /*#__PURE__*/_jsxDEV(Icon, {\n          icon: archive,\n          size: 18,\n          color: \"#8C8C8C\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 178,\n          columnNumber: 12\n        }, _this),\n        onClick: handleDraftingPost,\n        variant: \"textButton\",\n        isLoading: btnLoading\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 5\n      }, _this), /*#__PURE__*/_jsxDEV(Button, {\n        title: \"Next\",\n        iconPosition: \"right\",\n        disabled: adPost.title.length === 0 || adPost.price.length === 0 || btnLoading,\n        onClick: function onClick() {\n          return dispatch({\n            type: \"UPDATE_STEP\",\n            payload: {\n              step: step + 1\n            }\n          });\n        },\n        icon: /*#__PURE__*/_jsxDEV(Icon, {\n          icon: chevronRight,\n          size: 21,\n          color: \"#ffffff\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 195,\n          columnNumber: 12\n        }, _this),\n        style: {\n          backgroundColor: adPost.title.length === 0 || adPost.price.length === 0 || btnLoading ? \"#e2e2e2\" : \"#30C56D\"\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 5\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 4\n    }, _this)]\n  }, void 0, true);\n};\n\n_s(TitleAndPriceInfo, \"+ptxclY+y2g3sIExoe/02qi/MSE=\", false, function () {\n  return [useMutation];\n});\n\n_c = TitleAndPriceInfo;\nexport default TitleAndPriceInfo;\n\nvar _c;\n\n$RefreshReg$(_c, \"TitleAndPriceInfo\");","map":{"version":3,"sources":["C:/Users/olaji/OneDrive/Documents/sellit/template/packages/web/containers/AddPost/TitleAndPriceInfo/index.js"],"names":["React","useContext","useEffect","useState","getSlug","uploadMultipleImages","Icon","archive","chevronRight","Switch","Button","Text","Box","Input","AuthHelper","ADD_POST","useMutation","AddPostContext","imagesUrl","TitleAndPriceInfo","state","dispatch","step","adPost","errors","setError","btnLoading","setBtnLoading","postMutation","handleDraftingPost","refreshToken","localGallery","length","type","payload","gallery","concat","image","url","localImage","variables","post","finalData","data","id","key","value","addPost","preImage","preGallery","location","prossedAdPostData","lat","console","log","fontSize","fontWeight","color","title","required","target","price","parseFloat","marginBottom","val","isNegotiable","condition","backgroundColor"],"mappings":"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","sourcesContent":["import React, { useContext, useEffect, useState } from \"react\";\r\nimport getSlug from \"speakingurl\";\r\nimport { uploadMultipleImages } from \"../../../helpers/uploadMultipleImage\";\r\nimport Icon from \"react-icons-kit\";\r\nimport { archive } from \"react-icons-kit/ionicons/archive\";\r\nimport { chevronRight } from \"react-icons-kit/ionicons/chevronRight\";\r\nimport Switch from \"../../../../reusecore/src/elements/Switch\";\r\nimport Button from \"../../../../reusecore/src/elements/Button\";\r\nimport Text from \"../../../../reusecore/src/elements/Text\";\r\nimport Box from \"../../../../reusecore/src/elements/Box\";\r\nimport Input from \"../../../components/Input\";\r\nimport AuthHelper from \"../../../helpers/authHelper\";\r\nimport { ADD_POST } from \"../../../../core/graphql/Mutations\";\r\nimport { useMutation } from \"@apollo/react-hooks\";\r\nimport { AddPostContext } from \"../../../contexts/AddPostContext\";\r\n\r\nlet imagesUrl = [];\r\nconst TitleAndPriceInfo = () => {\r\n\tconst { state, dispatch } = useContext(AddPostContext);\r\n\tconst { step, adPost } = state;\r\n\r\n\tconst [errors, setError] = useState(\"\");\r\n\tconst [btnLoading, setBtnLoading] = useState(false);\r\n\tconst [postMutation] = useMutation(ADD_POST);\r\n\tconst handleDraftingPost = async () => {\r\n\t\tawait AuthHelper.refreshToken();\r\n\t\tsetBtnLoading(true);\r\n\t\tif (adPost.localGallery.length) {\r\n\t\t\timagesUrl = await uploadMultipleImages(adPost.localGallery);\r\n\t\t\tif (imagesUrl && imagesUrl.length > 0) {\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: \"UPDATE_FULL_ADPOST\",\r\n\t\t\t\t\tpayload: {\r\n\t\t\t\t\t\tgallery: adPost.gallery.concat(imagesUrl[0]),\r\n\t\t\t\t\t\timage: !adPost.image.url ? imagesUrl[0][0] : adPost.image,\r\n\t\t\t\t\t\tlocalImage: {},\r\n\t\t\t\t\t\tlocalGallery: [],\r\n\t\t\t\t\t},\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\ttry {\r\n\t\t\t\tconst data = await postMutation({\r\n\t\t\t\t\tvariables: {\r\n\t\t\t\t\t\tpost: finalData,\r\n\t\t\t\t\t},\r\n\t\t\t\t});\r\n\t\t\t\tsetBtnLoading(false);\r\n\t\t\t\tif (!adPost.id) {\r\n\t\t\t\t\tdispatch({\r\n\t\t\t\t\t\ttype: \"UPDATE_ADPOST\",\r\n\t\t\t\t\t\tpayload: { key: \"id\", value: data.data.addPost.id },\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t} catch (error) {\r\n\t\t\t\tsetBtnLoading(false);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\tconst {\r\n\t\tpreImage,\r\n\t\tpreGallery,\r\n\t\tlocalImage,\r\n\t\tlocalGallery,\r\n\t\tlocation,\r\n\t\t...prossedAdPostData\r\n\t} = adPost;\r\n\tlet finalData = prossedAdPostData;\r\n\tif (location && location.lat) {\r\n\t\tfinalData = {\r\n\t\t\t...prossedAdPostData,\r\n\t\t\tlocation,\r\n\t\t};\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\t(async function() {\r\n\t\t\tif (imagesUrl.length) {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tconst data = await postMutation({\r\n\t\t\t\t\t\tvariables: {\r\n\t\t\t\t\t\t\tpost: finalData,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t});\r\n\t\t\t\t\tconsole.log(data, \"data\");\r\n\t\t\t\t\tsetBtnLoading(false);\r\n\t\t\t\t\tif (!adPost.id) {\r\n\t\t\t\t\t\tdispatch({\r\n\t\t\t\t\t\t\ttype: \"UPDATE_ADPOST\",\r\n\t\t\t\t\t\t\tpayload: { key: \"id\", value: data.data.addPost.id },\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t} catch (error) {\r\n\t\t\t\t\tsetBtnLoading(false);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t})();\r\n\t}, [prossedAdPostData.gallery]);\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<Text\r\n\t\t\t\tcontent=\"Enter the below details\"\r\n\t\t\t\tpb={20}\r\n\t\t\t\tstyle={{ fontSize: 16, fontWeight: 400, color: \"#595959\" }}\r\n\t\t\t/>\r\n\t\t\t<Input\r\n\t\t\t\telementType=\"input\"\r\n\t\t\t\tvalue={adPost.title}\r\n\t\t\t\telementConfig={{\r\n\t\t\t\t\ttype: \"text\",\r\n\t\t\t\t\trequired: \"required\",\r\n\t\t\t\t}}\r\n\t\t\t\tlabel=\"Title\"\r\n\t\t\t\tchanged={(title) => {\r\n\t\t\t\t\tdispatch({\r\n\t\t\t\t\t\ttype: \"UPDATE_ADPOST\",\r\n\t\t\t\t\t\tpayload: { key: \"title\", value: title.target.value },\r\n\t\t\t\t\t});\r\n\t\t\t\t\t// if (adPost.slug === '') {\r\n\t\t\t\t\tdispatch({\r\n\t\t\t\t\t\ttype: \"UPDATE_ADPOST\",\r\n\t\t\t\t\t\tpayload: { key: \"slug\", value: getSlug(title.target.value) },\r\n\t\t\t\t\t});\r\n\t\t\t\t\t// }\r\n\t\t\t\t}}\r\n\t\t\t/>\r\n\t\t\t<Input\r\n\t\t\t\telementType=\"input\"\r\n\t\t\t\telementConfig={{\r\n\t\t\t\t\ttype: \"number\",\r\n\t\t\t\t\trequired: \"required\",\r\n\t\t\t\t}}\r\n\t\t\t\tlabel=\"Price\"\r\n\t\t\t\tvalue={adPost.price}\r\n\t\t\t\tchanged={(price) =>\r\n\t\t\t\t\tdispatch({\r\n\t\t\t\t\t\ttype: \"UPDATE_ADPOST\",\r\n\t\t\t\t\t\tpayload: { key: \"price\", value: parseFloat(price.target.value) },\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t\tstyle={{ marginBottom: 40 }}\r\n\t\t\t/>\r\n\t\t\t<Box flexBox justifyContent=\"space-between\" mb={30}>\r\n\t\t\t\t<Text content=\"Negotiable?\" color=\"#595959\" />\r\n\t\t\t\t<Switch\r\n\t\t\t\t\tswitchSize=\"50px\"\r\n\t\t\t\t\tswitchColor=\"#30C56D\"\r\n\t\t\t\t\tbarColor=\"#30C56D\"\r\n\t\t\t\t\tonChange={(val) =>\r\n\t\t\t\t\t\tdispatch({\r\n\t\t\t\t\t\t\ttype: \"UPDATE_ADPOST\",\r\n\t\t\t\t\t\t\tpayload: { key: \"isNegotiable\", value: !adPost.isNegotiable },\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t\tisChecked={adPost.isNegotiable}\r\n\t\t\t\t/>\r\n\t\t\t</Box>\r\n\t\t\t<Box flexBox justifyContent=\"space-between\" mb={30}>\r\n\t\t\t\t<Text content=\"New Condition?\" color=\"#595959\" />\r\n\t\t\t\t<Switch\r\n\t\t\t\t\tswitchSize=\"50px\"\r\n\t\t\t\t\tswitchColor=\"#30C56D\"\r\n\t\t\t\t\tbarColor=\"#30C56D\"\r\n\t\t\t\t\tonChange={(val) => {\r\n\t\t\t\t\t\tdispatch({\r\n\t\t\t\t\t\t\ttype: \"UPDATE_ADPOST\",\r\n\t\t\t\t\t\t\tpayload: { key: \"condition\", value: !adPost.condition },\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}}\r\n\t\t\t\t\tisChecked={adPost.condition}\r\n\t\t\t\t/>\r\n\t\t\t</Box>\r\n\t\t\t<Box flexBox justifyContent=\"space-between\">\r\n\t\t\t\t<Button\r\n\t\t\t\t\ttitle=\"Save\"\r\n\t\t\t\t\ticonPosition=\"left\"\r\n\t\t\t\t\ticon={<Icon icon={archive} size={18} color=\"#8C8C8C\" />}\r\n\t\t\t\t\tonClick={handleDraftingPost}\r\n\t\t\t\t\tvariant=\"textButton\"\r\n\t\t\t\t\tisLoading={btnLoading}\r\n\t\t\t\t/>\r\n\t\t\t\t<Button\r\n\t\t\t\t\ttitle=\"Next\"\r\n\t\t\t\t\ticonPosition=\"right\"\r\n\t\t\t\t\tdisabled={\r\n\t\t\t\t\t\tadPost.title.length === 0 || adPost.price.length === 0 || btnLoading\r\n\t\t\t\t\t}\r\n\t\t\t\t\tonClick={() =>\r\n\t\t\t\t\t\tdispatch({\r\n\t\t\t\t\t\t\ttype: \"UPDATE_STEP\",\r\n\t\t\t\t\t\t\tpayload: { step: step + 1 },\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t\ticon={<Icon icon={chevronRight} size={21} color=\"#ffffff\" />}\r\n\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\tbackgroundColor:\r\n\t\t\t\t\t\t\tadPost.title.length === 0 ||\r\n\t\t\t\t\t\t\tadPost.price.length === 0 ||\r\n\t\t\t\t\t\t\tbtnLoading\r\n\t\t\t\t\t\t\t\t? \"#e2e2e2\"\r\n\t\t\t\t\t\t\t\t: \"#30C56D\",\r\n\t\t\t\t\t}}\r\n\t\t\t\t/>\r\n\t\t\t</Box>\r\n\t\t</>\r\n\t);\r\n};\r\n\r\nexport default TitleAndPriceInfo;\r\n"]},"metadata":{},"sourceType":"module"}