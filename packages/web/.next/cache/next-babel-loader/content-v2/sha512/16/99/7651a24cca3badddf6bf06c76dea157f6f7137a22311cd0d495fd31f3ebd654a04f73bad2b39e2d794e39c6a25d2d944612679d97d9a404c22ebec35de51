{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\olaji\\\\OneDrive\\\\Documents\\\\sellit\\\\template\\\\packages\\\\web\\\\containers\\\\AddPost\\\\AddImage\\\\index.js\";\nvar __jsx = React.createElement;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport React, { useContext, Fragment } from \"react\";\nimport Dropzone from \"react-dropzone\";\nimport styled from \"styled-components\";\nimport { Col } from \"react-styled-flexboxgrid\";\nimport Icon from \"react-icons-kit\";\nimport { checkmarkCircled, closeCircled, androidClose } from \"react-icons-kit/ionicons\";\nimport UpIcon from \"../../../../core/static/images/UploadIcon.png\";\nimport { AddPostContext } from \"../../../contexts/AddPostContext\";\nimport Box from \"../../../../reusecore/src/elements/Box\";\nimport Image from \"../../../../reusecore/src/elements/Image\";\nconst UpButton = styled(\"button\").withConfig({\n  displayName: \"AddImage__UpButton\",\n  componentId: \"sc-18abi1y-0\"\n})([\"width:75px;height:75px;display:flex;align-items:center;justify-content:center;background-color:transparent;border:2px dashed #dfdfdf;border-radius:3px;outline:0;margin-bottom:15px;cursor:pointer;\"]);\nconst DeleteBtn = styled(\"button\").withConfig({\n  displayName: \"AddImage__DeleteBtn\",\n  componentId: \"sc-18abi1y-1\"\n})([\"width:18px;height:18px;display:flex;align-items:center;justify-content:center;background-color:#dfdfdf;font-size:12px;border:0;border-radius:50%;outline:0;position:absolute;top:-9px;left:-9px;\"]);\nconst ThumbWrapper = styled(\"div\").withConfig({\n  displayName: \"AddImage__ThumbWrapper\",\n  componentId: \"sc-18abi1y-2\"\n})([\"height:295px;overflow:hidden;overflow-y:auto;padding:10px;margin-left:-10px;-ms-overflow-style:none;overflow:-moz-scrollbars-none;&::-webkit-scrollbar{display:none;}\"]);\n\nconst AddImage = () => {\n  const {\n    state,\n    dispatch\n  } = useContext(AddPostContext);\n  const {\n    adPost\n  } = state;\n\n  const onPreviewDrop = selectedImages => {\n    selectedImages.map(image => {\n      image.preview = URL.createObjectURL(image);\n    });\n    dispatch({\n      type: \"UPDATE_ADPOST\",\n      payload: {\n        key: \"localGallery\",\n        value: adPost.localGallery.concat(selectedImages)\n      }\n    });\n  };\n\n  const handleRemoveImage = item => {\n    const gallery = adPost.gallery;\n    const localGallery = adPost.localGallery;\n    const index = gallery.findIndex(image => {\n      return item.url === image.url;\n    });\n\n    if (index !== -1) {\n      gallery.splice(index, 1);\n    }\n\n    const localImageIndex = localGallery.findIndex(image => {\n      return item.preview === image.preview;\n    });\n\n    if (localImageIndex !== -1) {\n      localGallery.splice(localImageIndex, 1);\n    }\n\n    if (item.url) {\n      if (item.url === adPost.preImage.url) {\n        dispatch({\n          type: \"UPDATE_ADPOST\",\n          payload: {\n            key: \"image\",\n            value: gallery[0]\n          }\n        });\n      }\n\n      dispatch({\n        type: \"UPDATE_ADPOST\",\n        payload: {\n          key: \"gallery\",\n          value: gallery\n        }\n      });\n    }\n\n    if (item.preview) {\n      if (item.preview === adPost.localImage.preview) {\n        dispatch({\n          type: \"UPDATE_ADPOST\",\n          payload: {\n            key: \"localImage\",\n            value: localGallery[0]\n          }\n        });\n      }\n\n      dispatch({\n        type: \"UPDATE_ADPOST\",\n        payload: {\n          key: \"localGallery\",\n          value: localGallery\n        }\n      });\n    }\n  };\n\n  let headerImgUri = \"\";\n\n  if (adPost.localImage && adPost.localImage.preview) {\n    headerImgUri = adPost.localImage.preview;\n  }\n\n  if (adPost.image && adPost.image.largeUrl) {\n    headerImgUri = adPost.image.largeUrl;\n  }\n\n  let gallery = [];\n  let localGalleryImage = [];\n\n  if (adPost.localGallery && adPost.localGallery.length) {\n    localGalleryImage = adPost.localGallery;\n  }\n\n  if (adPost.gallery && adPost.gallery.length) {\n    gallery = adPost.gallery;\n  }\n\n  const combinedGallery = gallery.concat(localGalleryImage);\n\n  const singleSliderImage = (image, index) => {\n    return __jsx(Box, {\n      key: index,\n      mb: 15,\n      width: \"75px\",\n      style: {\n        position: \"relative\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 4\n      }\n    }, combinedGallery.length > 1 && headerImgUri !== image.largeUrl && headerImgUri !== image.preview ? __jsx(DeleteBtn, {\n      onClick: () => handleRemoveImage(image),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 6\n      }\n    }, __jsx(Icon, {\n      icon: androidClose,\n      size: 12,\n      style: {\n        color: \"#333333\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 7\n      }\n    })) : null, __jsx(Box, {\n      key: index,\n      width: \"75px\",\n      style: {\n        display: \"flex\",\n        alignItems: \"center\",\n        justifyContent: \"center\",\n        border: \"1px solid #dfdfdf\"\n      },\n      onClick: () => {\n        if (image.preview) {\n          dispatch({\n            type: \"UPDATE_ADPOST\",\n            payload: {\n              key: \"localImage\",\n              value: image\n            }\n          });\n          dispatch({\n            type: \"UPDATE_ADPOST\",\n            payload: {\n              key: \"image\",\n              value: {}\n            }\n          });\n        }\n\n        if (image.url) {\n          dispatch({\n            type: \"UPDATE_ADPOST\",\n            payload: {\n              key: \"image\",\n              value: image\n            }\n          });\n        }\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 5\n      }\n    }, image.preview === headerImgUri ? __jsx(Icon, {\n      icon: checkmarkCircled,\n      size: 18,\n      style: {\n        position: \"absolute\",\n        top: -9,\n        right: -9,\n        zIndex: 1,\n        color: \"#30C56D\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 7\n      }\n    }) : null, image.largeUrl === headerImgUri ? __jsx(Icon, {\n      icon: checkmarkCircled,\n      size: 20,\n      style: {\n        position: \"absolute\",\n        top: -15,\n        right: -10,\n        zIndex: 1,\n        color: \"#30C56D\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 210,\n        columnNumber: 7\n      }\n    }) : null, __jsx(Image, {\n      src: image.preview ? image.preview : image.largeUrl,\n      alt: image.preview ? image.preview : image.largeUrl,\n      height: \"57px\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 222,\n        columnNumber: 6\n      }\n    })));\n  };\n\n  return __jsx(Box, {\n    pr: 20,\n    mb: 50,\n    flexBox: true,\n    style: {\n      width: \"100%\",\n      display: \"flex\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 233,\n      columnNumber: 3\n    }\n  }, __jsx(Box, {\n    mr: 30,\n    flexBox: true,\n    flexDirection: \"column\",\n    style: {\n      flexShrink: 0\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 244,\n      columnNumber: 4\n    }\n  }, __jsx(Dropzone, {\n    onDrop: onPreviewDrop,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 245,\n      columnNumber: 5\n    }\n  }, ({\n    getRootProps,\n    getInputProps\n  }) => {\n    return __jsx(\"div\", _extends({}, getRootProps(), {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 248,\n        columnNumber: 8\n      }\n    }), __jsx(\"input\", _extends({}, getInputProps(), {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 249,\n        columnNumber: 9\n      }\n    })), __jsx(UpButton, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 250,\n        columnNumber: 9\n      }\n    }, __jsx(Image, {\n      src: UpIcon,\n      alt: \"upload icon\",\n      width: 40,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 251,\n        columnNumber: 10\n      }\n    })));\n  }), __jsx(ThumbWrapper, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 257,\n      columnNumber: 5\n    }\n  }, combinedGallery.length ? combinedGallery.map(singleSliderImage) : null)), __jsx(Box, {\n    style: {\n      border: \"1px solid #e2e2e2\",\n      width: \"100%\",\n      height: 400,\n      textAlign: \"center\",\n      display: \"flex\",\n      alignItems: \"center\",\n      justifyContent: \"center\",\n      overflow: \"hidden\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 264,\n      columnNumber: 4\n    }\n  }, __jsx(Image, {\n    src: headerImgUri,\n    alt: headerImgUri,\n    height: \"100%\",\n    style: {\n      objectFit: \"cover\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 276,\n      columnNumber: 5\n    }\n  })));\n};\n\nexport default AddImage;","map":{"version":3,"sources":["C:/Users/olaji/OneDrive/Documents/sellit/template/packages/web/containers/AddPost/AddImage/index.js"],"names":["React","useContext","Fragment","Dropzone","styled","Col","Icon","checkmarkCircled","closeCircled","androidClose","UpIcon","AddPostContext","Box","Image","UpButton","DeleteBtn","ThumbWrapper","AddImage","state","dispatch","adPost","onPreviewDrop","selectedImages","map","image","preview","URL","createObjectURL","type","payload","key","value","localGallery","concat","handleRemoveImage","item","gallery","index","findIndex","url","splice","localImageIndex","preImage","localImage","headerImgUri","largeUrl","localGalleryImage","length","combinedGallery","singleSliderImage","position","color","display","alignItems","justifyContent","border","top","right","zIndex","width","flexShrink","getRootProps","getInputProps","height","textAlign","overflow","objectFit"],"mappings":"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","sourcesContent":["import React, { useContext, Fragment } from \"react\";\r\nimport Dropzone from \"react-dropzone\";\r\nimport styled from \"styled-components\";\r\nimport { Col } from \"react-styled-flexboxgrid\";\r\nimport Icon from \"react-icons-kit\";\r\nimport {\r\n\tcheckmarkCircled,\r\n\tcloseCircled,\r\n\tandroidClose,\r\n} from \"react-icons-kit/ionicons\";\r\nimport UpIcon from \"../../../../core/static/images/UploadIcon.png\";\r\nimport { AddPostContext } from \"../../../contexts/AddPostContext\";\r\n\r\nimport Box from \"../../../../reusecore/src/elements/Box\";\r\nimport Image from \"../../../../reusecore/src/elements/Image\";\r\n\r\nconst UpButton = styled(\"button\")`\r\n\twidth: 75px;\r\n\theight: 75px;\r\n\tdisplay: flex;\r\n\talign-items: center;\r\n\tjustify-content: center;\r\n\tbackground-color: transparent;\r\n\tborder: 2px dashed #dfdfdf;\r\n\tborder-radius: 3px;\r\n\toutline: 0;\r\n\r\n\tmargin-bottom: 15px;\r\n\tcursor: pointer;\r\n`;\r\n\r\nconst DeleteBtn = styled(\"button\")`\r\n\twidth: 18px;\r\n\theight: 18px;\r\n\tdisplay: flex;\r\n\talign-items: center;\r\n\tjustify-content: center;\r\n\tbackground-color: #dfdfdf;\r\n\tfont-size: 12px;\r\n\tborder: 0;\r\n\tborder-radius: 50%;\r\n\toutline: 0;\r\n\tposition: absolute;\r\n\ttop: -9px;\r\n\tleft: -9px;\r\n`;\r\n\r\nconst ThumbWrapper = styled(\"div\")`\r\n\theight: 295px;\r\n\toverflow: hidden;\r\n\toverflow-y: auto;\r\n\tpadding: 10px;\r\n\tmargin-left: -10px;\r\n\t-ms-overflow-style: none;\r\n\toverflow: -moz-scrollbars-none;\r\n\r\n\t&::-webkit-scrollbar {\r\n\t\tdisplay: none;\r\n\t}\r\n`;\r\n\r\nconst AddImage = () => {\r\n\tconst { state, dispatch } = useContext(AddPostContext);\r\n\tconst { adPost } = state;\r\n\r\n\tconst onPreviewDrop = (selectedImages) => {\r\n\t\tselectedImages.map((image) => {\r\n\t\t\timage.preview = URL.createObjectURL(image);\r\n\t\t});\r\n\r\n\t\tdispatch({\r\n\t\t\ttype: \"UPDATE_ADPOST\",\r\n\t\t\tpayload: {\r\n\t\t\t\tkey: \"localGallery\",\r\n\t\t\t\tvalue: adPost.localGallery.concat(selectedImages),\r\n\t\t\t},\r\n\t\t});\r\n\t};\r\n\r\n\tconst handleRemoveImage = (item) => {\r\n\t\tconst gallery = adPost.gallery;\r\n\t\tconst localGallery = adPost.localGallery;\r\n\r\n\t\tconst index = gallery.findIndex((image) => {\r\n\t\t\treturn item.url === image.url;\r\n\t\t});\r\n\t\tif (index !== -1) {\r\n\t\t\tgallery.splice(index, 1);\r\n\t\t}\r\n\r\n\t\tconst localImageIndex = localGallery.findIndex((image) => {\r\n\t\t\treturn item.preview === image.preview;\r\n\t\t});\r\n\r\n\t\tif (localImageIndex !== -1) {\r\n\t\t\tlocalGallery.splice(localImageIndex, 1);\r\n\t\t}\r\n\r\n\t\tif (item.url) {\r\n\t\t\tif (item.url === adPost.preImage.url) {\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: \"UPDATE_ADPOST\",\r\n\t\t\t\t\tpayload: { key: \"image\", value: gallery[0] },\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tdispatch({\r\n\t\t\t\ttype: \"UPDATE_ADPOST\",\r\n\t\t\t\tpayload: { key: \"gallery\", value: gallery },\r\n\t\t\t});\r\n\t\t}\r\n\t\tif (item.preview) {\r\n\t\t\tif (item.preview === adPost.localImage.preview) {\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: \"UPDATE_ADPOST\",\r\n\t\t\t\t\tpayload: { key: \"localImage\", value: localGallery[0] },\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tdispatch({\r\n\t\t\t\ttype: \"UPDATE_ADPOST\",\r\n\t\t\t\tpayload: { key: \"localGallery\", value: localGallery },\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\r\n\tlet headerImgUri = \"\";\r\n\r\n\tif (adPost.localImage && adPost.localImage.preview) {\r\n\t\theaderImgUri = adPost.localImage.preview;\r\n\t}\r\n\tif (adPost.image && adPost.image.largeUrl) {\r\n\t\theaderImgUri = adPost.image.largeUrl;\r\n\t}\r\n\tlet gallery = [];\r\n\tlet localGalleryImage = [];\r\n\r\n\tif (adPost.localGallery && adPost.localGallery.length) {\r\n\t\tlocalGalleryImage = adPost.localGallery;\r\n\t}\r\n\r\n\tif (adPost.gallery && adPost.gallery.length) {\r\n\t\tgallery = adPost.gallery;\r\n\t}\r\n\tconst combinedGallery = gallery.concat(localGalleryImage);\r\n\r\n\tconst singleSliderImage = (image, index) => {\r\n\t\treturn (\r\n\t\t\t<Box\r\n\t\t\t\tkey={index}\r\n\t\t\t\tmb={15}\r\n\t\t\t\twidth=\"75px\"\r\n\t\t\t\tstyle={{\r\n\t\t\t\t\tposition: \"relative\",\r\n\t\t\t\t}}\r\n\t\t\t>\r\n\t\t\t\t{combinedGallery.length > 1 &&\r\n\t\t\t\theaderImgUri !== image.largeUrl &&\r\n\t\t\t\theaderImgUri !== image.preview ? (\r\n\t\t\t\t\t<DeleteBtn onClick={() => handleRemoveImage(image)}>\r\n\t\t\t\t\t\t<Icon\r\n\t\t\t\t\t\t\ticon={androidClose}\r\n\t\t\t\t\t\t\tsize={12}\r\n\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\tcolor: \"#333333\",\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</DeleteBtn>\r\n\t\t\t\t) : null}\r\n\t\t\t\t<Box\r\n\t\t\t\t\tkey={index}\r\n\t\t\t\t\twidth=\"75px\"\r\n\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\tdisplay: \"flex\",\r\n\t\t\t\t\t\talignItems: \"center\",\r\n\t\t\t\t\t\tjustifyContent: \"center\",\r\n\t\t\t\t\t\tborder: \"1px solid #dfdfdf\",\r\n\t\t\t\t\t}}\r\n\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\tif (image.preview) {\r\n\t\t\t\t\t\t\tdispatch({\r\n\t\t\t\t\t\t\t\ttype: \"UPDATE_ADPOST\",\r\n\t\t\t\t\t\t\t\tpayload: { key: \"localImage\", value: image },\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tdispatch({\r\n\t\t\t\t\t\t\t\ttype: \"UPDATE_ADPOST\",\r\n\t\t\t\t\t\t\t\tpayload: { key: \"image\", value: {} },\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (image.url) {\r\n\t\t\t\t\t\t\tdispatch({\r\n\t\t\t\t\t\t\t\ttype: \"UPDATE_ADPOST\",\r\n\t\t\t\t\t\t\t\tpayload: { key: \"image\", value: image },\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}}\r\n\t\t\t\t>\r\n\t\t\t\t\t{image.preview === headerImgUri ? (\r\n\t\t\t\t\t\t<Icon\r\n\t\t\t\t\t\t\ticon={checkmarkCircled}\r\n\t\t\t\t\t\t\tsize={18}\r\n\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\tposition: \"absolute\",\r\n\t\t\t\t\t\t\t\ttop: -9,\r\n\t\t\t\t\t\t\t\tright: -9,\r\n\t\t\t\t\t\t\t\tzIndex: 1,\r\n\t\t\t\t\t\t\t\tcolor: \"#30C56D\",\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t) : null}\r\n\t\t\t\t\t{image.largeUrl === headerImgUri ? (\r\n\t\t\t\t\t\t<Icon\r\n\t\t\t\t\t\t\ticon={checkmarkCircled}\r\n\t\t\t\t\t\t\tsize={20}\r\n\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\tposition: \"absolute\",\r\n\t\t\t\t\t\t\t\ttop: -15,\r\n\t\t\t\t\t\t\t\tright: -10,\r\n\t\t\t\t\t\t\t\tzIndex: 1,\r\n\t\t\t\t\t\t\t\tcolor: \"#30C56D\",\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t) : null}\r\n\t\t\t\t\t<Image\r\n\t\t\t\t\t\tsrc={image.preview ? image.preview : image.largeUrl}\r\n\t\t\t\t\t\talt={image.preview ? image.preview : image.largeUrl}\r\n\t\t\t\t\t\theight=\"57px\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t</Box>\r\n\t\t\t</Box>\r\n\t\t);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<Box\r\n\t\t\tpr={20}\r\n\t\t\tmb={50}\r\n\t\t\tflexBox\r\n\t\t\tstyle={{\r\n\t\t\t\twidth: \"100%\",\r\n\t\t\t\tdisplay: \"flex\",\r\n\t\t\t}}\r\n\t\t>\r\n\t\t\t{/* Featured Image Banner */}\r\n\r\n\t\t\t<Box mr={30} flexBox flexDirection=\"column\" style={{ flexShrink: 0 }}>\r\n\t\t\t\t<Dropzone onDrop={onPreviewDrop}>\r\n\t\t\t\t\t{({ getRootProps, getInputProps }) => {\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t<div {...getRootProps()}>\r\n\t\t\t\t\t\t\t\t<input {...getInputProps()} />\r\n\t\t\t\t\t\t\t\t<UpButton>\r\n\t\t\t\t\t\t\t\t\t<Image src={UpIcon} alt={\"upload icon\"} width={40} />\r\n\t\t\t\t\t\t\t\t</UpButton>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t}}\r\n\t\t\t\t</Dropzone>\r\n\t\t\t\t<ThumbWrapper>\r\n\t\t\t\t\t{combinedGallery.length\r\n\t\t\t\t\t\t? combinedGallery.map(singleSliderImage)\r\n\t\t\t\t\t\t: null}\r\n\t\t\t\t</ThumbWrapper>\r\n\t\t\t</Box>\r\n\r\n\t\t\t<Box\r\n\t\t\t\tstyle={{\r\n\t\t\t\t\tborder: \"1px solid #e2e2e2\",\r\n\t\t\t\t\twidth: \"100%\",\r\n\t\t\t\t\theight: 400,\r\n\t\t\t\t\ttextAlign: \"center\",\r\n\t\t\t\t\tdisplay: \"flex\",\r\n\t\t\t\t\talignItems: \"center\",\r\n\t\t\t\t\tjustifyContent: \"center\",\r\n\t\t\t\t\toverflow: \"hidden\",\r\n\t\t\t\t}}\r\n\t\t\t>\r\n\t\t\t\t<Image\r\n\t\t\t\t\tsrc={headerImgUri}\r\n\t\t\t\t\talt={headerImgUri}\r\n\t\t\t\t\theight=\"100%\"\r\n\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\tobjectFit: \"cover\",\r\n\t\t\t\t\t}}\r\n\t\t\t\t/>\r\n\t\t\t</Box>\r\n\t\t</Box>\r\n\t);\r\n};\r\n\r\nexport default AddImage;\r\n"]},"metadata":{},"sourceType":"module"}