{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/Users/mrcea/Desktop/Nunua/template/packages/web/containers/AccountSetting/EditProfile/index.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { useState, useEffect } from 'react';\nimport { withFormik } from 'formik';\nimport Input from '../../../components/Input';\nimport Heading from 'reusecore/src/elements/Heading';\nimport Button from 'reusecore/src/elements/Button';\nimport ChangeProfilePicture from './UploadImage';\nimport { openModal } from '@redq/reuse-modal';\nimport SuccessModal from '../../../containers/ModalContainer/SuccessModal';\nimport Alert from 'reusecore/src/elements/Alert';\nimport { uploadMultipleImages } from '../../../helpers/uploadMultipleImage';\nimport { useMutation } from '@apollo/react-hooks';\nimport AuthHelper from '../../../helpers/authHelper';\nimport { UPDATE_AUTHOR } from 'core/graphql/Mutations';\nimport { GET_AUTHOR } from 'core/graphql/Author';\nlet imagesUrl = [];\nconst EditProfileEnhancher = withFormik({\n  enableReinitialize: 'true',\n  mapPropsToValues: props => {\n    const {\n      author,\n      loading\n    } = props;\n    const name = !loading && author && author.name ? author.name : '';\n    const website = !loading && author && author.website ? author.website : '';\n    const address = !loading && author && author.address ? author.address : '';\n    return {\n      name,\n      address,\n      website\n    };\n  },\n  displayName: 'EditProfileForm' // helps with React DevTools\n\n});\n\nconst EditProfile = props => {\n  const {\n    0: localImage,\n    1: setImage\n  } = useState(null);\n  const {\n    0: error,\n    1: setError\n  } = useState('');\n  const {\n    0: btnLoading,\n    1: setBtnLoading\n  } = useState(false);\n  const {\n    0: uploadRejected,\n    1: setUploadRejected\n  } = useState(false);\n  const {\n    values,\n    touched,\n    errors,\n    handleChange,\n    setFieldValue,\n    loading,\n    author\n  } = props;\n  useEffect(() => {\n    (async function () {\n      if (values.image) {\n        try {\n          await addAuthor({\n            variables: {\n              author: _objectSpread(_objectSpread({}, author), values)\n            }\n          });\n          setBtnLoading(false);\n        } catch (error) {\n          setError(error.graphQLErrors[0].message);\n          setBtnLoading(false);\n        }\n      }\n    })();\n  }, [values.image]);\n\n  const onPreviewDrop = images => {\n    setUploadRejected(false);\n    images.map(image => {\n      image.preview = URL.createObjectURL(image);\n    });\n\n    if (images.length) {\n      setImage(images[0]);\n    }\n  };\n\n  const onDropRejected = () => {\n    setUploadRejected(true);\n  };\n\n  let avatar;\n\n  if (!loading && author && author.image && author.image.largeUrl) {\n    avatar = {\n      preview: author.image.largeUrl\n    };\n  }\n\n  if (localImage !== null) {\n    avatar = localImage;\n  }\n\n  const handlesSubmit = async () => {\n    setBtnLoading(true);\n    await AuthHelper.refreshToken();\n\n    if (localImage) {\n      imagesUrl = await uploadMultipleImages([localImage]);\n      setFieldValue('image', imagesUrl[0][0]);\n    } else {\n      try {\n        await addAuthor({\n          variables: {\n            author: _objectSpread(_objectSpread({}, author), values)\n          }\n        });\n        setBtnLoading(false);\n        if (error != '') openModal({\n          config: {\n            disableDragging: false,\n            minHeight: 'auto',\n            size: {\n              width: 350,\n              height: 260\n            },\n            enableResizing: {\n              bottom: true,\n              bottomLeft: true,\n              bottomRight: true,\n              left: true,\n              right: true,\n              top: true,\n              topLeft: true,\n              topRight: true\n            }\n          },\n          modalClass: 'customModal',\n          closeOnClickOutside: true,\n          component: SuccessModal\n        });\n      } catch (error) {\n        setBtnLoading(false);\n        setError(error.graphQLErrors[0].message);\n      }\n    }\n  };\n\n  const [addAuthor] = useMutation(UPDATE_AUTHOR);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Heading, {\n      as: \"h3\",\n      content: \"Profile Setting\",\n      fontSize: 18,\n      color: \"#333333\",\n      fontWeight: 600\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 7\n    }, this), uploadRejected && /*#__PURE__*/_jsxDEV(Alert, {\n      colors: \"error\",\n      mb: 30,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          textAlign: 'center'\n        },\n        children: \"Maximum upload size 1MB\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(ChangeProfilePicture, {\n      onPreviewDrop: onPreviewDrop,\n      proPic: avatar,\n      maxSize: 1024000,\n      onDropRejected: onDropRejected\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Input, {\n      elementType: \"input\",\n      elementConfig: {\n        type: 'text',\n        required: 'required'\n      },\n      label: \"Name\",\n      changed: handleChange('name'),\n      value: values.name,\n      error: errors.name,\n      touched: touched\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Input, {\n      elementType: \"input\",\n      elementConfig: {\n        type: 'text',\n        required: 'required'\n      },\n      label: \"Address\",\n      changed: handleChange('address'),\n      value: values.address,\n      error: errors.address,\n      touched: touched\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Input, {\n      elementType: \"input\",\n      elementConfig: {\n        type: 'text',\n        required: 'required'\n      },\n      label: \"Web\",\n      changed: handleChange('website'),\n      value: values.website,\n      error: errors.website,\n      touched: touched\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Button, {\n      onClick: handlesSubmit,\n      title: \"Save Changes\",\n      bg: \"#30C56D\",\n      color: \"#ffffff\",\n      mt: 10,\n      width: 1,\n      isLoading: btnLoading,\n      loaderColor: \"#ffffff\",\n      iconPosition: \"left\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n\nexport default EditProfileEnhancher(EditProfile);","map":{"version":3,"sources":["/Users/mrcea/Desktop/Nunua/template/packages/web/containers/AccountSetting/EditProfile/index.js"],"names":["React","useState","useEffect","withFormik","Input","Heading","Button","ChangeProfilePicture","openModal","SuccessModal","Alert","uploadMultipleImages","useMutation","AuthHelper","UPDATE_AUTHOR","GET_AUTHOR","imagesUrl","EditProfileEnhancher","enableReinitialize","mapPropsToValues","props","author","loading","name","website","address","displayName","EditProfile","localImage","setImage","error","setError","btnLoading","setBtnLoading","uploadRejected","setUploadRejected","values","touched","errors","handleChange","setFieldValue","image","addAuthor","variables","graphQLErrors","message","onPreviewDrop","images","map","preview","URL","createObjectURL","length","onDropRejected","avatar","largeUrl","handlesSubmit","refreshToken","config","disableDragging","minHeight","size","width","height","enableResizing","bottom","bottomLeft","bottomRight","left","right","top","topLeft","topRight","modalClass","closeOnClickOutside","component","textAlign","type","required"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { withFormik } from 'formik';\nimport Input from '../../../components/Input';\nimport Heading from 'reusecore/src/elements/Heading';\nimport Button from 'reusecore/src/elements/Button';\nimport ChangeProfilePicture from './UploadImage';\nimport { openModal } from '@redq/reuse-modal';\nimport SuccessModal from '../../../containers/ModalContainer/SuccessModal';\nimport Alert from 'reusecore/src/elements/Alert';\n\nimport { uploadMultipleImages } from '../../../helpers/uploadMultipleImage';\nimport { useMutation } from '@apollo/react-hooks';\nimport AuthHelper from '../../../helpers/authHelper';\n\nimport { UPDATE_AUTHOR } from 'core/graphql/Mutations';\nimport { GET_AUTHOR } from 'core/graphql/Author';\nlet imagesUrl = [];\nconst EditProfileEnhancher = withFormik({\n  enableReinitialize: 'true',\n  mapPropsToValues: props => {\n    const { author, loading } = props;\n    const name = !loading && author && author.name ? author.name : '';\n    const website = !loading && author && author.website ? author.website : '';\n    const address = !loading && author && author.address ? author.address : '';\n    return {\n      name,\n      address,\n      website,\n    };\n  },\n  displayName: 'EditProfileForm', // helps with React DevTools\n});\n\nconst EditProfile = props => {\n  const [localImage, setImage] = useState(null);\n  const [error, setError] = useState('');\n  const [btnLoading, setBtnLoading] = useState(false);\n  const [uploadRejected, setUploadRejected] = useState(false);\n  const {\n    values,\n    touched,\n    errors,\n    handleChange,\n    setFieldValue,\n    loading,\n    author,\n  } = props;\n\n  useEffect(() => {\n    (async function() {\n      if (values.image) {\n        try {\n          await addAuthor({\n            variables: {\n              author: {\n                ...author,\n                ...values,\n              },\n            },\n          });\n\n          setBtnLoading(false);\n        } catch (error) {\n          setError(error.graphQLErrors[0].message);\n          setBtnLoading(false);\n        }\n      }\n    })();\n  }, [values.image]);\n  const onPreviewDrop = images => {\n    setUploadRejected(false);\n    images.map(image => {\n      image.preview = URL.createObjectURL(image);\n    });\n    if (images.length) {\n      setImage(images[0]);\n    }\n  };\n  const onDropRejected = () => {\n    setUploadRejected(true);\n  };\n  let avatar;\n  if (!loading && author && author.image && author.image.largeUrl) {\n    avatar = { preview: author.image.largeUrl };\n  }\n  if (localImage !== null) {\n    avatar = localImage;\n  }\n  const handlesSubmit = async () => {\n    setBtnLoading(true);\n    await AuthHelper.refreshToken();\n    if (localImage) {\n      imagesUrl = await uploadMultipleImages([localImage]);\n      setFieldValue('image', imagesUrl[0][0]);\n    } else {\n      try {\n        await addAuthor({\n          variables: {\n            author: {\n              ...author,\n              ...values,\n            },\n          },\n        });\n        setBtnLoading(false);\n        if (error != '')\n          openModal({\n            config: {\n              disableDragging: false,\n              minHeight: 'auto',\n              size: {\n                width: 350,\n                height: 260,\n              },\n              enableResizing: {\n                bottom: true,\n                bottomLeft: true,\n                bottomRight: true,\n                left: true,\n                right: true,\n                top: true,\n                topLeft: true,\n                topRight: true,\n              },\n            },\n            modalClass: 'customModal',\n            closeOnClickOutside: true,\n            component: SuccessModal,\n          });\n      } catch (error) {\n        setBtnLoading(false);\n        setError(error.graphQLErrors[0].message);\n      }\n    }\n  };\n  const [addAuthor] = useMutation(UPDATE_AUTHOR);\n\n  return (\n    <>\n      <Heading\n        as=\"h3\"\n        content=\"Profile Setting\"\n        fontSize={18}\n        color=\"#333333\"\n        fontWeight={600}\n      />\n      {uploadRejected && (\n        <Alert colors=\"error\" mb={30}>\n          <div style={{ textAlign: 'center' }}>Maximum upload size 1MB</div>\n        </Alert>\n      )}\n      <ChangeProfilePicture\n        onPreviewDrop={onPreviewDrop}\n        proPic={avatar}\n        maxSize={1024000}\n        onDropRejected={onDropRejected}\n      />\n      <Input\n        elementType=\"input\"\n        elementConfig={{\n          type: 'text',\n          required: 'required',\n        }}\n        label=\"Name\"\n        changed={handleChange('name')}\n        value={values.name}\n        error={errors.name}\n        touched={touched}\n      />\n      <Input\n        elementType=\"input\"\n        elementConfig={{\n          type: 'text',\n          required: 'required',\n        }}\n        label=\"Address\"\n        changed={handleChange('address')}\n        value={values.address}\n        error={errors.address}\n        touched={touched}\n      />\n      <Input\n        elementType=\"input\"\n        elementConfig={{\n          type: 'text',\n          required: 'required',\n        }}\n        label=\"Web\"\n        changed={handleChange('website')}\n        value={values.website}\n        error={errors.website}\n        touched={touched}\n      />\n      <Button\n        onClick={handlesSubmit}\n        title=\"Save Changes\"\n        bg=\"#30C56D\"\n        color=\"#ffffff\"\n        mt={10}\n        width={1}\n        isLoading={btnLoading}\n        loaderColor=\"#ffffff\"\n        iconPosition=\"left\"\n      />\n    </>\n  );\n};\n\nexport default EditProfileEnhancher(EditProfile);\n"]},"metadata":{},"sourceType":"module"}